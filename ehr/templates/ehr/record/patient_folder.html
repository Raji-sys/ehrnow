{%extends "base.html" %}
{%load static%}
{% block title %}PATIENT FOLDER{% endblock%}
{%block page_title%}
<div class="bg-white shadow-sm rounded-lg p-2 mb-2 flex flex-col sm:flex-row justify-between items-center">
  <div class="flex flex-col sm:flex-row items-center mb-4 sm:mb-0">
      <h1 class="text-lg font-semibold text-gray-800 mb-2 sm:mb-0 sm:mr-4">{{patient.full_name}}</h1>
      <div class="bg-emerald-100 rounded-full px-4 py-2 flex items-center">
          <span class="text-emerald-700 font-medium mr-2">Wallet Balance:</span>
          <span class="text-emerald-800 font-bold">â‚¦{{ patient.wallet.balance|floatformat:2 }}</span>
      </div>
  </div>
  <a href="{% url 'fund_wallet' patient.id %}" class="bg-amber-600 hover:bg-amber-700 text-white font-medium py-2 px-4 rounded-full transition duration-300 ease-in-out flex items-center">
      <i class="fas fa-wallet mr-2"></i>
      Fund Wallet
  </a>
</div>
{%endblock%}
{% block content %}

<div class="">
  <section class="max-w-xl mx-auto text-center border-cyan-700 p-1 m-1">
      {% for message in messages %}
      <div class="">
        <div class="bg-green-100 rounded-2xl text-xs p-2" uk-alert>
          <a href class="uk-alert-close font-bold text-rose-900" uk-close></a>
          <p class="text-green-700  uppercase">{{ message }}</p>
        </div>
      </div>
      {% endfor %}
    </section>

<div class="md:mx-20  rounded-xl shadow-black shadow-sm mx-2 text-xs ">
  <div class="text-center rounded-xl md:p-8 p-2 bg-gray-50 uppercase max-h[40vh]">
<!-- start -->
<!-- top  -->
<style>
  .uk-subnav-pill > * > :first-child {
      padding: 0.25rem 1rem;
      background-color: transparent;
      transition: background-color 0.3s, color 0.3s;
  }
  .uk-subnav-pill > * > a:hover {
      background-color: rgba(6, 182, 212, 0.1);
      color: rgb(21, 94, 117);
  }
</style>
<ul class="text-xs text-cyan-700 uk-subnav uk-subnav-pill uppercase flex flex-wrap justify-center gap-2 border-b-2 border-cyan-200 mb-3  bg-gray-50" uk-switcher="animation: uk-animation-slide-left-medium, uk-animation-slide-right-medium">
  <li><a href="#" class="rounded-lg">BIODATA</a></li>
  <li><a href="#" class="rounded-lg">VISIT</a></li>
  <li><a href="#" class="rounded-lg">WALLET TRANSACTION HISTORY</a></li>
  <li><a href="#" class="rounded-lg">PAYMENT HISTORY</a></li>
  <li><a href="#" class="rounded-lg">VITAL SIGNS</a></li>
  <li><a href="#" class="rounded-lg">CLINICAL NOTES</a></li>
  <li><a href="#" class="rounded-lg">LAB INVESTIGATIONS</a></li>
  <li><a href="#" class="rounded-lg">PRESCRIPTION</a></li>
  <li><a href="#" class="rounded-lg">RADIOLOGY</a></li>
  <li><a href="#" class="rounded-lg">PHYSIO</a></li>
  <li><a href="#" class="rounded-lg">ADMISSION</a></li>
  <li><a href="#" class="rounded-lg">SURGERY BILL</a></li>
  <li><a href="#" class="rounded-lg">WARD</a></li>
  <li><a href="#" class="rounded-lg">THEATRE</a></li>
  <li><a href="#" class="rounded-lg">ARCHIVE AND FILES</a></li>
</ul>
<!-- top end  -->
    <div class="uk-switcher uk-margin ">
      <!-- break -->
      <div class=""> 
        <div class="overflow-x-auto max-h-[50vh] p-2">
          <table class="min-w-full divide-y divide-cyan-200 mb-4">
              <thead class="bg-cyan-50">
              <tr class=" text-xs">
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">FILE NUMBER</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">NAME</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">AGE</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">GENDER</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">PHONE</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">OCCUPATION</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">MARITAL STATUS</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">RELIGION</th>
                <!-- <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">TRIBE</th> -->
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">ADDRESS</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">NEXT OF KIN</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">RELATIONSHIP WITH NEXT OF KIN</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">NEXT OF KIN PHONE</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">NEXT OF KIN ADDRESS</th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-cyan-200">
              <tr class="bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300 text-xs">
                <td class=" p-3">{{ patient.file_no|default_if_none:''|upper}}</td>
                <td class=" p-3">{{ patient.full_name|default_if_none:''|upper}}</td>
                <td class=" p-3">{{ patient.age|default_if_none:''|upper }}</td>
                <td class=" p-3">{{ patient.gender|default_if_none:''|upper }}</td>
                <td class=" p-3">{{ patient.phone|default_if_none:''|upper }}</td>
                <td class=" p-3">{{ patient.occupation|default_if_none:''|upper }}</td>
                <td class=" p-3">{{ patient.marital_status|default_if_none:''|upper }}</td>
                <td class=" p-3">{{ patient.religion|default_if_none:''|upper }}</td>
                <!-- <td class=" p-3">{{ patient.tribe|default_if_none:''|upper }}</td> -->
                <td class=" p-3">{{ patient.address|default_if_none:''|upper }}</td>
                <td class=" p-3">{{ patient.nok_name|default_if_none:''|upper }}</td>
                <td class=" p-3">{{ patient.nok_rel|default_if_none:''|upper }}</td>
                <td class=" p-3">{{ patient.nok_phone|default_if_none:''|upper }}</td>
                <td class=" p-3">{{ patient.nok_addr|default_if_none:''|upper }}</td>
                
              </tr>
            </tbody>
          </table>
        </div>
     </div>
      <div class="">
        <div>
          <a href="{%url 'visit_record' patient.file_no%}" class="text-xs text-green-600 hover:text-green-700"><i class="fa-solid fa-plus fa-2xl"></i></a>
        </div>        
        <div class="overflow-x-auto max-h-[50vh] p-2">
          <table class="min-w-full divide-y divide-cyan-200 mb-4">
            <thead class="bg-cyan-50">
              <tr class=" text-xs">
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">CLINIC</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">TEAM</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">REASON</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">DATE</th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-cyan-200">
              {%for v in visits %}
              <tr class="bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300 text-xs">
                <td class=" p-3">{{ v.clinic|default_if_none:''|upper}}</td>
                <td class=" p-3">{{ v.team|default_if_none:''|upper}}</td>
                <td class=" p-3">{{ v.record|default_if_none:''|upper}}</td>
                <td class=" p-3">{{ v.updated|default_if_none:''}}</td>
                
              </tr>
              {%endfor%}
            </tbody>
          </table>
        </div>
     </div>
    <!-- break -->
      <!-- break -->
      <div> 
        <div class="overflow-x-auto max-h-[50vh] p-2">
          <table class="min-w-full divide-y divide-cyan-200 mb-4">
            <thead class="bg-cyan-50">
              <tr class="text-xs">
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">TRANSACTION</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">DESCRIPTION</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">AMOUNT</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">DATE</th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-cyan-200">
              {%for w in wallet %}
              <tr class="uppercase bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300 text-xs ">
                <td class=" p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                {% if w.transaction_type == 'DEBIT' %}
                <td class=" p-3 whitespace-nowrap text-red-700">
                  <i class="fa-solid fa-minus-circle text-red-700 fa-2xl"></i> {{w.transaction_type}}
                </td>
                {% else %}
                <td class=" p-3 whitespace-nowrap text-green-700">
                  <i class="fa-solid fa-plus-circle fa-2xl"></i> {{w.transaction_type}}
                </td>
                {% endif %}
                <td class=" p-3 whitespace-nowrap">{{ w.description }}</td>
                <td class=" p-3 whitespace-nowrap text-green-700">&#x20A6;{{ w.amount }}</td>
                <td class=" p-3 whitespace-nowrap text-green-700">{{ w.created_at }}</td>
              </tr>
              {%empty%}
              <div class="p-2">
                  <p>No payments found yet</p>
              </div>
             {%endfor%}
            </tbody>
          </table>
        </div>
     </div>
    <!-- break -->
      <!-- break -->

      <!-- break -->
      <!-- break -->
      <div> 
        <div class="overflow-x-auto max-h-[50vh] p-2">
          <table class="min-w-full divide-y divide-cyan-200 mb-4">
            <thead class="bg-cyan-50">
              <tr class="text-xs">
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">SERVICE</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">PRICE</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">PAYMENT STATUS</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">DATE</th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-cyan-200">
              {%for p in payments %}
              <tr class="uppercase bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300 text-xs ">
                <td class=" p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                <td class=" p-3 whitespace-nowrap">{{ p.service }}</td>
                <td class=" p-3 whitespace-nowrap text-green-700">&#x20A6;{{ p.price }}</td>
                {% if p.status == False %}
                <td class=" p-3 whitespace-nowrap text-red-700">
                  <i class="fa-solid fa-x text-red-700 fa-2xl"></i>
                </td>
                {% else %}
                <td class=" p-3 whitespace-nowrap text-green-700">
                  <i class="fa-solid fa-thumbs-up fa-2xl"></i>
                </td>
                {% endif %}
                <td class=" p-3 whitespace-nowrap">{{ p.updated }}</td>
              </tr>
              {%empty%}
              <div class="p-2">
                  <p>No payments found yet</p>
              </div>
             {%endfor%}
            </tbody>
          </table>
          <div class="mt-2">
            <!-- times: {{paid_transactions_count}} -->
            <span class="uppercase text-sm">
          Total amount: <span class="text-green-700 uppercase text-sm ">
            &#x20A6;{{ total_amount|floatformat:2 }}
          </span>
        </span>
        </div>
        </div>
     </div>
    <!-- break -->
      <!-- break -->
      <div> 
        <div>
        <a href="{%url 'vital_signs' patient.file_no%}" class="text-xs text-green-600 hover:text-green-700"><i class="fa-solid fa-heartbeat fa-2xl"></i></a>
      </div>     
        <div class="overflow-x-auto max-h-[50vh] p-2">
          <table class="min-w-full divide-y divide-cyan-200 mb-4">
            <thead class="bg-cyan-50">
              <tr class="text-xs">
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Nurse</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">body temperature</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">pulse rate</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">respiration rate</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">blood pressure</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">blood oxygen</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">blood glucose</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">height</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">weight</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">date</th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-cyan-200">
              {%for v in vitals %}
              <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                <td class=" p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                <td class=" p-3 whitespace-nowrap">{{ v.user }}</td>
                <td class=" p-3 whitespace-nowrap">{{ v.body_temperature }}</td>
                <td class=" p-3 whitespace-nowrap">{{ v.pulse_rate }}</td>
                <td class=" p-3 whitespace-nowrap">{{ v.respiration_rate }}</td>
                <td class=" p-3 whitespace-nowrap">{{ v.blood_pressure }}</td>
                <td class=" p-3 whitespace-nowrap">{{ v.blood_oxygen }}</td>
                <td class=" p-3 whitespace-nowrap">{{ v.blood_glucose }}</td>
                <td class=" p-3 whitespace-nowrap">{{ v.weight }}</td>
                <td class=" p-3 whitespace-nowrap">{{ v.height }}</td>
                <td class=" p-3 whitespace-nowrap">{{ v.updated }}</td>
              </tr>
              {%empty%}
              <div class="p-2">
                  <p>No vital signs yet</p>
              </div>
         {%endfor%}
            </tbody>
          </table>
        </div>
     </div>
    <!-- break -->
      <!-- break -->
      <div> 
        <div>
        <a href="{%url 'clinical_note' patient.file_no%}" class="text-xs text-green-600 hover:text-green-700"><i class="fa-solid fa-notes-medical fa-2xl"></i></a>
      </div>     

        <div class="overflow-x-auto max-h-[50vh] p-2">
          <table class="min-w-full divide-y divide-cyan-200 mb-4">
            <thead class="bg-cyan-50">
              <tr class="text-xs">
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">DOCTOR</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">NOTE</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">DIAGNOSIS</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">APPOINTMENT</th>
                <!-- <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">UPDATE REVIEW STATUS</th>  -->
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">DATE CONSULTED</th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-cyan-200">
              {% for c in clinical_notes %}
              <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                <td class=" p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                <td class=" p-3 whitespace-nowrap">{{ c.user }}</td>
                <td class=" p-3 whitespace-nowrap">
                  <details>
                    <summary class="bg-blue-600 p-2 text-white rounded-lg text-center">OPEN NOTE</summary>
                    <div class="bg-white text-blue-600 h-fit text-xs well-sm overflow-x-auto max-h-[50vh] rounded-md m-4">
                      <p class="text-xs text-center">{{ c.note.html|safe }}</p>
                    </div>
                  </details>
                </td>
                <td class=" p-3 whitespace-nowrap">{{ c.diagnosis|default_if_none:'' }}</td>
                <td class=" p-3 whitespace-nowrap">{{ c.appointment|default_if_none:'' }}</td>
                <!-- <td class=" p-3 whitespace-nowrap"><a href="{%url 'clinical_note_update' c.id%}" class="text-xs text-green-600 hover:text-green-700"><i class="fa-solid fa-pen-fancy fa-2xl"></i></a> -->
                  <td class=" p-3 whitespace-nowrap">{{ c.updated }}</td>
                </td>
              </tr>
              {%empty%}
              <div class="p-2">
                  <p>No clinical notes yet</p>
              </div>
         {%endfor%}
            </tbody>
          </table>
        </div>
     </div>
    <!-- break -->
      <!-- break -->
      <div> 
          <div class="text-center rounded-xl p-2 md:p-10 bg-gray-50">
            <ul class="uk-subnav uk-subnav-pill uppercase flex justify-center gap-2 " uk-switcher="animation: uk-animation-slide-left-medium, uk-animation-slide-right-medium">
              <li ><a href="#" class="rounded-lg ">HEMATOLOGY</a></li>
              <li class=><a href="#" class="rounded-lg ">MICROBIOLOGY</a></li>
              <li><a href="#" class="rounded-lg ">CHEMICAL PATHOLOGY</a></li>
              <li><a href="#" class="rounded-lg ">SEROLOGY</a></li>
            </ul>
            
            <div class="uk-switcher uk-margin">

              <div> 
                <div >
                <a href="{% url 'pathology:hematology_test' patient.file_no %}" class="text-xs text-rose-600 hover:text-green-700"><i class="fa-solid fa-syringe fa-2xl"></i></a>
                </div>
             
                <div class="overflow-x-auto max-h-[50vh] p-2">
                  <table class="min-w-full divide-y divide-cyan-200 mb-4">
                    <thead class="bg-cyan-50">
                      <tr class="text-xs">
                        <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                        <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Test</th>
                        <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Date Collected</th>
                        <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Result</th>
                        <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Comment</th>
                        <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Date Reported</th>
                        <!-- <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Actions</th> -->
                      </tr>
            
                    </thead>
                    <tbody class="bg-white divide-y divide-cyan-200">
                      {% for h in hematology_results %}
                      <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                        <td class=" p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                        <td class=" p-3 whitespace-nowrap">{{ h.test|default_if_none:''}}</td>
                        <td class=" p-3 whitespace-nowrap">{{ h.collected|default_if_none:'' }}</td>
                        <td class=" p-3 whitespace-nowrap">{{ h.result.html|safe }}</td>
                        <td class=" p-3 whitespace-nowrap">{{ h.comments|default_if_none:'' }}</td>
                        <td class=" p-3 whitespace-nowrap">{{ h.reported|default_if_none:'' }}</td>
                        <!-- <td class=" p-3 whitespace-nowrap">
                          <a href="{% url 'pathology:hematology_result' h.patient.file_no h.id %}" class="text-green-600 hover:text-green-700"><i class="fa-solid fa-plus-square fa-2xl"></i></a>
                        </td> -->
                      </tr>
                      {%empty%}
                      <div class="p-2">
                          <p>No hematology test and result yet</p>
                      </div>
                     {%endfor%}
                    </tbody>
                  </table>
                </div>
             </div>
            
              <div>
                <div>
                  <a href="{% url 'pathology:micro_test' patient.file_no %}" class="text-xs text-rose-600 hover:text-green-700"><i class="fa-solid fa-syringe fa-2xl"></i></a>
                </div>
                <div class="overflow-x-auto max-h-[50vh] p-2">
                  <table class="min-w-full divide-y divide-cyan-200 mb-4">
                    <thead class="bg-cyan-50">
                      <tr class="text-xs">
                        <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                        <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Test</th>
                        <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Date Collected</th>
                        <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Result</th>
                        <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Comment</th>
                        <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Date Reported</th>
                        <!-- <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Actions</th> -->
                      </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-cyan-200">
                      {% for m in micro_results %}
                      <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                        <td class=" p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                        <td class=" p-3 whitespace-nowrap">{{ m.test|default_if_none:''}}</td>
                        <td class=" p-3 whitespace-nowrap">{{ m.collected|default_if_none:'' }}</td>
                        <td class=" p-3 whitespace-nowrap">{{ m.result.html|safe }}</td>
                        <td class=" p-3 whitespace-nowrap">{{ m.comment|default_if_none:'' }}</td>
                        <td class=" p-3 whitespace-nowrap">{{ m.reported|default_if_none:'' }}</td>
                        <!-- <td class=" p-3 whitespace-nowrap">
                          <a href="{% url 'pathology:micro_result' m.patient.file_no m.id %}" class="text-green-600 hover:text-green-700"><i class="fa-solid fa-plus-square fa-2xl"></i></a>
                        </td> -->
                      </tr>
                      {%empty%}
                      <div class="p-2">
                          <p>No microbiology test and result yet</p>
                      </div>
                     {%endfor%}
                    </tbody>
                  </table>
                </div>
            
              </div>
            
            
              <div>
                <div>
                  <a href="{% url 'pathology:chempath_test' patient.file_no %}" class="text-xs text-rose-600 hover:text-green-700"><i class="fa-solid fa-syringe fa-2xl"></i></a>
                </div>
                <div class="overflow-x-auto max-h-[50vh] p-2">
                  <table class="min-w-full divide-y divide-cyan-200 mb-4">
                    <thead class="bg-cyan-50">
            
                      <tr class="text-xs">
                        <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                        <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Test</th>
                        <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Date Collected</th>
                        <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Result</th>
                        <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Comment</th>
                        <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Date Reported</th>
                        <!-- <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Actions</th> -->
                      </tr>
            
                    </thead>
                    <tbody class="bg-white divide-y divide-cyan-200">
                      {% for c in chempath_results %}
                      <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                        <td class=" p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                        <td class=" p-3 whitespace-nowrap">{{ c.test|default_if_none:''}}</td>
                        <td class=" p-3 whitespace-nowrap">{{ c.collected|default_if_none:'' }}</td>
                        <td class=" p-3 whitespace-nowrap">{{ c.result.html|safe }}</td>
                        <td class=" p-3 whitespace-nowrap">{{ c.comment|default_if_none:'' }}</td>
                        <td class=" p-3 whitespace-nowrap">{{ c.reported|default_if_none:'' }}</td>
                        <!-- <td class=" p-3 whitespace-nowrap">
                          <a href="{% url 'pathology:chempath_result' c.patient.file_no c.id %}" class="text-green-600 hover:text-green-700"><i class="fa-solid fa-plus-square fa-2xl"></i></a>
                        </td> -->
                      </tr>
                      {%empty%}
                      <div class="p-2">
                          <p>No chemical pathology test and result yet</p>
                      </div>
                     {%endfor%}
                    </tbody>
                  </table>
                </div>
              </div>
            
              <div>
                <div>
                  <a href="{% url 'pathology:serology_test' patient.file_no %}" class="text-xs text-rose-600 hover:text-green-700"><i class="fa-solid fa-syringe fa-2xl"></i></a>
                      </div>
                      <div class="overflow-x-auto max-h-[50vh] p-2">    
                        <table class="min-w-full divide-y divide-cyan-200 mb-4">
                          <thead class="bg-cyan-50">
                            <tr class="text-xs">
                              <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                              <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Test</th>
                              <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Date Collected</th>
                              <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Result</th>
                              <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Comment</th>
                              <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Date Reported</th>
                              <!-- <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Actions</th> -->
                            </tr>
                          </thead>
                          <tbody class="bg-white divide-y divide-cyan-200">
                            {% for s in serology_results %}
                            <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                              <td class=" p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                              <td class=" p-3 whitespace-nowrap">{{ s.test.name|default_if_none:''}}</td>
                              <td class=" p-3 whitespace-nowrap">{{ s.collected|default_if_none:'' }}</td>
                              <td class=" p-3 whitespace-nowrap">{{ s.result.html|safe }}</td>
                              <td class=" p-3 whitespace-nowrap">{{ s.comments|default_if_none:'' }}</td>
                              <td class=" p-3 whitespace-nowrap">{{ s.reported|default_if_none:'' }}</td>
                              <!-- <td class=" p-3 whitespace-nowrap">
                                <a href="{% url 'pathology:serology_result' s.patient.file_no s.id %}" class="text-green-600 hover:text-green-700"><i class="fa-solid fa-plus-square fa-2xl"></i></a>
                                </td> -->
                            </tr>
                            {%empty%}
                            <div class="p-2">
                                <p>No serology test and result yet</p>
                            </div>
                           {%endfor%}
                          </tbody>
                        </table>
                      </div>          
              </div>
            
            </div>
      </div>
    </div>
    <!-- break -->
      <!-- break -->
      <div> 
        <div>    
        <!-- Dispensary Form Section -->
        <a href="{% url 'pharm:add_prescription' patient.file_no %}" class="text-xs text-green-600 hover:text-green-700"><i class="fa-solid fa-prescription fa-2xl"></i></a>

      </div>     
        <div class="overflow-x-auto max-h-[50vh] p-2">
          <table class="min-w-full divide-y divide-cyan-200 mb-4">
            <thead class="bg-cyan-50">
              <tr class="text-xs">
                <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Prescribed Drugs</th>
                <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Dose</th>
                <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Quantity</th>
                <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Date Prescribed</th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-cyan-200">
              {% for p in prescribed_drugs %}
              <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                <td class=" p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                <td class=" p-3 whitespace-nowrap">{{ p.drug|default_if_none:''}}</td>
                <td class=" p-3 whitespace-nowrap">{{ p.dose|default_if_none:''}}</td>
                <td class=" p-3 whitespace-nowrap">{{ p.quantity|default_if_none:''}}</td>
                <td class=" p-3 whitespace-nowrap">{{ p.updated}}</td>
              </tr>
              {%empty%}
              <div class="p-2 text-xs">
                  <p>No prescriptions yet</p>
              </div>
             {%endfor%}
          </tbody>
          </table>
        </div>
     </div>
    <!-- break -->
      <!-- break -->

      <div>
        <div>
            <a href="{% url 'radiology_test' patient.file_no %}" class="text-xs text-rose-600 hover:text-green-700"><i class="fa-solid fa-x-ray fa-2xl"></i></a>
          </div>
        <div class="overflow-x-auto max-h-[50vh] p-2">
            <table class="min-w-full divide-y divide-cyan-200 mb-4">
                <thead class="bg-cyan-50">
                    <tr class="text-xs">
                        <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                        <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Test</th>
                        <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Comment</th>
                        <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Date Reported</th>
                        <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">DICOM File</th>
                    </tr>
                </thead>
                <tbody class="bg-white divide-y divide-cyan-200">
                    {% for r in radiology_results %}
                    <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                        <td class="p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                        <td class="p-3 whitespace-nowrap">{{ r.test|default_if_none:'' }}</td>
                        <td class="p-3 whitespace-nowrap">{{ r.comments|default_if_none:'' }}</td>
                        <td class="p-3 whitespace-nowrap">{{ r.updated|default_if_none:'' }}</td>
                        <td class="p-3 whitespace-nowrap">
                        <a href="{{ result.dicom_file.url }}" download>Download DICOM File</a>
                      </td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="5" class="p-3">
                            <p>No radiology test and result yet</p>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    <!-- break -->
      <!-- break -->
      <div> 
        <div>
        <a href="#" class="text-xs text-green-600 hover:text-green-700"><i class="fa-solid fa-crutch fa-2xl"></i></a>
      </div>     
        <div class="overflow-x-auto max-h-[50vh] p-2">
          <table class="min-w-full divide-y divide-cyan-200 mb-4">
            <thead class="bg-cyan-50">
              <tr class="text-xs">
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-cyan-200">
              
              <tr class="text-xs uppercase bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                <td class=" p-3 whitespace-nowrap"></td>
              </tr>

            </tbody>
          </table>
        </div>
     </div>
    <!-- break -->
      <!-- break -->
      <div> 
        <div>
        <a href="{%url 'admit_patient' patient.file_no %}" class="text-xs text-green-600 hover:text-green-700"><i class="fa-solid fa-bed fa-2xl"></i></a>
      </div>     
        <div class="overflow-x-auto max-h-[50vh] p-2">
          <table class="min-w-full divide-y divide-cyan-200 mb-4 uppercase">
            <thead class="bg-cyan-50">
              <tr class="text-xs">
                <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">status</th>
                <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">ward</th>
                <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">bed number</th>
                <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">admission date</th>
                <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">discharge date</th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-cyan-200">
              {% for a in admission_info %}
              <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                  <td class="p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                  <td class="p-3 whitespace-nowrap">
                      {% if a.status == 'RECEIVED' %}
                          <span class="text-green-600">
                              on admission for 
                              <span class="text-blue-600 text-sm">
                                  ({{ a.days_on_admission }} 
                                  {% if a.days_on_admission == 1 %}day{% else %}days{% endif %})
                              </span>
                          </span>
                      {% elif a.status == 'DISCHARGE' %}
                          <span class="text-cyan-600">discharged</span>
                      {% else %}
                          <span class="text-rose-500">not accepted yet</span>
                      {% endif %}
                  </td>
                  <td class="p-3 whitespace-nowrap">{{ a.ward|default_if_none:'' }}</td>
                  <td class="p-3 whitespace-nowrap">
                      {% if a.bed_number %}
                          <span class="text-green-600">{{ a.bed_number }}</span>
                      {% else %}
                          <span class="text-rose-500">bed not assigned yet</span>
                      {% endif %}
                  </td>
                  <td class="p-3 whitespace-nowrap">{{ a.created }}</td>
                  <td class="p-3 whitespace-nowrap">
                      {% if a.status == 'DISCHARGE' %}{{ a.updated }}{% endif %}
                  </td>
              </tr>
              {% endfor %}            </tbody>
          </table>
        </div>
     </div>
    <!-- break -->
      <!-- break -->
      <div> 
      <div class="text-center rounded-xl p-2 md:p-10 bg-gray-50">
        <ul class="uk-subnav uk-subnav-pill uppercase flex justify-center gap-2 " uk-switcher="animation: uk-animation-slide-left-medium, uk-animation-slide-right-medium">
          <li ><a href="#" class="rounded-lg ">PRIVATE SURGERY BILL</a></li>
          <li ><a href="#" class="rounded-lg ">SURGERY BILL</a></li>
        </ul>
        
        <div class="uk-switcher uk-margin">
          <div> 
            <div >
            <a href="{% url 'private_surgery_bill' patient.file_no %}" class="text-xs text-rose-600 hover:text-green-700"><i class="fa-solid fa-money-check fa-2xl"></i></a>
            </div>
         
            <div class="overflow-x-auto max-h-[50vh] p-2">
              <table class="min-w-full divide-y divide-cyan-200 mb-4">
                <thead class="bg-cyan-50">
                  <tr class="text-xs">
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">price</th>
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">payment</th>
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">billed by</th>
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">date</th>
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">details</th>
                      </tr>
        
                </thead>
                <tbody class="bg-white divide-y divide-cyan-200">
                  {% for s in private_bill %}
                  <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                    <td class=" p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                    <td class=" p-3 whitespace-nowrap">&#x20A6;{{ s.total_amount }}</td>
                    <td class=" p-3 whitespace-nowrap">
                      {% if s.items.first.payment.status %}
                      <span class="text-green-500">Paid</span>
                  {% else %}
                      <span class="text-red-500">Unpaid</span>
                  {% endif %}
                    </td>
                    <td class=" p-3 whitespace-nowrap">{{ s.user }}</td>
                    <td class=" p-3 whitespace-nowrap">{{ s.created }}</td>
                    <td class=" p-3 whitespace-nowrap"> <a href="{% url 'private_bill_detail' s.id %}" class="text-blue-500 hover:underline">View Details</a></td>
                      </tr>
                  {%empty%}
                  <div class="p-2">
                      <p>No surgery bill yet</p>
                  </div>
                 {%endfor%}
                </tbody>
              </table>
            </div>
         </div>

         <div> 
            <div >
            <a href="{% url 'surgery_bill' patient.file_no %}" class="text-xs text-rose-600 hover:text-green-700"><i class="fa-solid fa-money-check fa-2xl"></i></a>
            </div>
         
            <div class="overflow-x-auto max-h-[50vh] p-2">
              <table class="min-w-full divide-y divide-cyan-200 mb-4">
                <thead class="bg-cyan-50">
                  <tr class="text-xs">
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">price</th>
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">payment</th>
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">billed by</th>
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">date</th>
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">details</th>
                      </tr>
        
                </thead>
                <tbody class="bg-white divide-y divide-cyan-200">
                  {% for s in bills %}
                  <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                    <td class=" p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                    <td class=" p-3 whitespace-nowrap">&#x20A6;{{ s.total_amount }}</td>
                    <td class=" p-3 whitespace-nowrap">
                      {% if s.items.first.payment.status %}
                      <span class="text-green-500">Paid</span>
                  {% else %}
                      <span class="text-red-500">Unpaid</span>
                  {% endif %}
                    </td>
                    <td class=" p-3 whitespace-nowrap">{{ s.user }}</td>
                    <td class=" p-3 whitespace-nowrap">{{ s.created }}</td>
                    <td class=" p-3 whitespace-nowrap"> <a href="{% url 'bill_detail' s.id %}" class="text-blue-500 hover:underline">View Details</a></td>
                      </tr>
                  {%empty%}
                  <div class="p-2">
                      <p>No surgery bill yet</p>
                  </div>
                 {%endfor%}
                </tbody>
              </table>
            </div>
         </div>

        
  </div>

  </div>
     </div>

     <!-- break -->
      <!-- break -->
      <div> 
      <div class="text-center rounded-xl p-2 md:p-10 bg-gray-50">
        <ul class="uk-subnav uk-subnav-pill uppercase flex justify-center gap-2 " uk-switcher="animation: uk-animation-slide-left-medium, uk-animation-slide-right-medium">
          <li ><a href="#" class="rounded-lg ">IN-PATIENT VITAL SIGNS</a></li>
          <li class=><a href="#" class="rounded-lg ">IN-PATIENT MEDICATION</a></li>
          <li><a href="#" class="rounded-lg ">IN-PATIENT NOTES</a></li>
        </ul>
        
        <div class="uk-switcher uk-margin">


         <div> 
            <div >
            <a href="{% url 'ward_vital_signs' patient.file_no %}" class="text-xs text-rose-600 hover:text-green-700"><i class="fa-solid fa-heartbeat fa-2xl"></i></a>
            </div>
         
            <div class="overflow-x-auto max-h-[50vh] p-2">
              <table class="min-w-full divide-y divide-cyan-200 mb-4">
                <thead class="bg-cyan-50">
                  <tr class="text-xs">
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">body temperature</th>
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">pulse rate</th>
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">respiration rate</th>
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">blood pressure</th>
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">blood oxygen</th>
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">blood glucose</th>
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">weight</th>
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">by</th>
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">date</th>
                      </tr>
        
                </thead>
                <tbody class="bg-white divide-y divide-cyan-200">
                  {% for w in ward_vital_signs %}
                  <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                    <td class=" p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                    <td class=" p-3 whitespace-nowrap">{{ w.body_temperature }}</td>
                    <td class=" p-3 whitespace-nowrap">{{ w.pulse_rate }}</td>
                    <td class=" p-3 whitespace-nowrap">{{ w.respiration_rate }}</td>
                    <td class=" p-3 whitespace-nowrap">{{ w.blood_pressure }}</td>
                    <td class=" p-3 whitespace-nowrap">{{ w.blood_oxygen }}</td>
                    <td class=" p-3 whitespace-nowrap">{{ w.blood_glucose }}</td>
                    <td class=" p-3 whitespace-nowrap">{{ w.weight }}</td>
                    <td class=" p-3 whitespace-nowrap">{{ w.user }}</td>
                    <td class=" p-3 whitespace-nowrap">{{ w.updated }}</td>
                      </tr>
                  {%empty%}
                  <div class="p-2">
                      <p>No ward vitals sign yet</p>
                  </div>
                 {%endfor%}
                </tbody>
              </table>
            </div>
         </div>
        
          <div>
            <div>
              <a href="{% url 'ward_medication' patient.file_no %}" class="text-xs text-cyan-600 hover:text-green-700"><i class="fa-solid fa-file-prescription fa-2xl"></i></a>
            </div>
            <div class="overflow-x-auto max-h-[50vh] p-2">
              <table class="min-w-full divide-y divide-cyan-200 mb-4">
                <thead class="bg-cyan-50">
                  <tr class="text-xs">
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Drug</th>
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Dose</th>
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Comment</th>
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">By</th>
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Date</th>
                  </tr>
                </thead>
                <tbody class="bg-white divide-y divide-cyan-200">
                  {% for w in ward_medication%}
                  <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                    <td class=" p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                    <td class=" p-3 whitespace-nowrap">{{ w.drug|default_if_none:''}}</td>
                    <td class=" p-3 whitespace-nowrap">{{ w.dose|default_if_none:'' }}</td>
                    <td class=" p-3 whitespace-nowrap">{{ w.comments|default_if_none:'' }}</td>
                    <td class=" p-3 whitespace-nowrap">{{ w.user|default_if_none:'' }}</td>
                    <td class=" p-3 whitespace-nowrap">{{ w.updated|default_if_none:'' }}</td>
               
                  </tr>
                  {%empty%}
                  <div class="p-2">
                      <p>No ward medications yet</p>
                  </div>
                 {%endfor%}
                </tbody>
              </table>
            </div>
          </div>
        
        
          <div>
            <div>
              <a href="{% url 'ward_notes' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700"><i class="fa-solid fa-clipboard-list fa-2xl"></i></a>
            </div>
            <div class="overflow-x-auto max-h-[50vh] p-2">
              <table class="min-w-full divide-y divide-cyan-200 mb-4">
                <thead class="bg-cyan-50">
        
                  <tr class="text-xs">
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Note</th>
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">By</th>
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Date</th>
                  </tr>
        
                </thead>
                <tbody class="bg-white divide-y divide-cyan-200">
                  {% for w in ward_clinical_notes %}
                  <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                    <td class=" p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                    <td class=" p-3 whitespace-nowrap">
                      <details>
                        <summary class="bg-blue-600 p-2 text-white rounded-lg text-center">OPEN NOTE</summary>
                        <div class="bg-white text-blue-600 h-fit text-xs well-sm overflow-x-auto max-h-[50vh] rounded-md m-4">
                          <p class="text-xs text-center">{{ w.note.html|safe }}</p>
                        </div>
                      </details>    
                    </td>
                    <td class=" p-3 whitespace-nowrap">{{ w.user|default_if_none:'' }}</td>
                    <td class=" p-3 whitespace-nowrap">{{ w.updated|default_if_none:'' }}</td>
                  </tr>
                  {%empty%}
                  <div class="p-2">
                      <p>No ward clinical notes yet</p>
                  </div>
                 {%endfor%}
                </tbody>
              </table>
            </div>
          </div>  
        
  </div>

  </div>
     </div>

    <!-- break -->
    <!-- break -->
      <!-- break -->
      <div> 
        <div class="text-center rounded-xl p-2 m-4  md:p-10 bg-gray-50">
          <ul class="uk-subnav uk-subnav-pill uppercase flex justify-center gap-2 " uk-switcher="animation: uk-animation-slide-left-medium, uk-animation-slide-right-medium">
            <li ><a href="#" class="rounded-lg ">THEATRE BOOKINGS</a></li>
            <li><a href="#" class="rounded-lg ">OPERATION NOTES</a></li>
            <li><a href="#" class="rounded-lg ">THEATRE OPERATION RECORD</a></li>
            <li><a href="#" class="rounded-lg ">ANAESTHSIA CHECKLIST</a></li>
          </ul>
          
          <div class="uk-switcher uk-margin">
     
            <div>
              <div>
                <a href="{% url 'book_for_surgery' patient.file_no %}" class="text-xs text-cyan-600 hover:text-green-700"><i class="fa-solid fa-calendar-days fa-2xl"></i></a>
              </div>
              <div class="overflow-x-auto max-h-[50vh] p-2">
                <table class="min-w-full divide-y divide-cyan-200 mb-4">
                  <thead class="bg-cyan-50">
                    <tr class="text-xs">
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Theatre</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Team</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">DIAGNOSIS</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">OPERATION PLANNED</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">operation date</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Booked By</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Date Booked</th>
                    </tr>
                  </thead>
                  <tbody class="bg-white divide-y divide-cyan-200">
                    {% for t in theatre_bookings %}
                    <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                      <td class=" p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ t.theatre|default_if_none:''}}</td>
                      <td class=" p-3 whitespace-nowrap">{{ t.team|default_if_none:'' }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ t.diagnosis|default_if_none:'' }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ t.operation_planned|default_if_none:'' }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ t.date|default_if_none:'' }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ t.doctor|default_if_none:'' }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ t.updated|default_if_none:'' }}</td>
                 
                    </tr>
                    {%empty%}
                    <div class="p-2">
                        <p>No theatre bookings yet</p>
                    </div>
                   {%endfor%}
                  </tbody>
                </table>
              </div>
            </div>
          
          
            <div>
              <div>
                <a href="{% url 'operation_notes' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700"><i class="fa-solid fa-clipboard-list fa-2xl"></i></a>
              </div>
              <div class="overflow-x-auto max-h-[50vh] p-2">
                <table class="min-w-full divide-y divide-cyan-200 mb-4">
                  <thead class="bg-cyan-50">
          
                    <tr class="text-xs">
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">anaesthesia used</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">findings</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">post op-order</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">prescription</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Note</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">By</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Date</th>
                    </tr>
          
                  </thead>
                  <tbody class="bg-white divide-y divide-cyan-200">
                    {% for o in operation_notes %}
                    <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                      <td class=" p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ o.type_of_anaesthesia }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ o.findings }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ o.post_op_order }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ o.prescription }}</td>
                      <td class=" p-3 whitespace-nowrap">
                        <details>
                          <summary class="bg-blue-600 p-2 text-white rounded-lg text-center">OPEN NOTE</summary>
                          <div class="bg-white text-blue-600 h-fit text-xs well-sm overflow-x-auto max-h-[50vh] rounded-md m-4">
                            <p class="text-xs text-center">{{ o.notes }}</p>
                          </div>
                        </details>    
                      </td>
                      <td class=" p-3 whitespace-nowrap">{{ o.user|default_if_none:'' }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ o.updated|default_if_none:'' }}</td>
                    </tr>
                    {%empty%}
                    <div class="p-2">
                        <p>No theatre notes yet</p>
                    </div>
                   {%endfor%}
                  </tbody>
                </table>
              </div>
            </div>  
          
          
            <div>
              <div>
                <a href="{% url 'theatre_operation_record' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700"><i class="fa-solid fa-clipboard-list fa-2xl"></i></a>
              </div>
              <div class="overflow-x-auto max-h-[50vh] p-2">
                <table class="min-w-full divide-y divide-cyan-200 mb-4">
                  <thead class="bg-cyan-50">
          
                    <tr class="text-xs">
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">theatre</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">ward</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">diagnosis</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">operation</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">surgeon</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">assistant</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">instrument nurse</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">circulating nurse</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">anaesthetist</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">comments</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Date of operation</th>
                    </tr>
          
                  </thead>
                  <tbody class="bg-white divide-y divide-cyan-200">
                    {% for t in theatre_operation_record %}
                    <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                      <td class=" p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ t.theatre }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ t.ward }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ t.diagnosis }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ t.operation }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ t.surgeon }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ t.assistant_1 }} <br> {{t.assistant_2}}<br> {{t.assistant_3}}</td>
                      <td class=" p-3 whitespace-nowrap">{{ t.instrument_nurse|default_if_none:'' }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ t.circulating_nurse|default_if_none:'' }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ t.anaesthetist|default_if_none:'' }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ t.comments|default_if_none:'' }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ t.date_of_operation|default_if_none:'' }}</td>
                    </tr>
                    {%empty%}
                    <div class="p-2">
                        <p>No theatre operation records yet</p>
                    </div>
                   {%endfor%}
                  </tbody>
                </table>
              </div>
            </div>  
          
          
          
          
            <div>
              <div>
                <a href="{% url 'anaesthesia_checklist' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700"><i class="fa-solid fa-clipboard-list fa-2xl"></i></a>
              </div>
              <div class="overflow-x-auto max-h-[50vh] p-2">
                <table class="min-w-full divide-y divide-cyan-200 mb-4">
                  <thead class="bg-cyan-50">
          
                    <tr class="text-xs">
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">concurrent medical illness</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">past medical history</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">past surgical history</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">trasnfussion</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">drug history</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">social history</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">denctures</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">permanent</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">temporary</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">loose teeth</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">last meal</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">comment</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Date</th>
                    </tr>
          
                  </thead>
                  <tbody class="bg-white divide-y divide-cyan-200">
                    {% for a in anaesthesia_checklist %}
                    <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                      <td class=" p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ a.current_medical_illness }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ a.past_medical_history }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ a.past_surgical_history }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ a.transfussion }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ a.drug_history }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ a.social_history }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ a.denctures }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ a.permanent }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ a.temporary }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ a.lose_teeth }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ a.last_meal }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ a.comment }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ a.updated|default_if_none:'' }}</td>
                    </tr>
                    {%empty%}
                    <div class="p-2">
                        <p>No anaesthesia checklist record yet</p>
                    </div>
                   {%endfor%}
                  </tbody>
                </table>
              </div>
            </div>  
          
          
    </div>
  
    </div>
     </div>

         <!-- break -->
      <!-- break -->
      <div class="flex flex-col items-center">
        <div class="mb-4">
          <a href="{% url 'new_archive' patient.file_no %}" class="text-xs text-green-600 hover:text-green-700">
            <i class="fas fa-file-upload fa-2xl"></i> Upload File
          </a>
        </div>
        <div class="overflow-x-auto max-h-[50vh] p-2 w-full">
          <table class="min-w-full divide-y divide-cyan-200 mb-4 uppercase">
            <thead class="bg-cyan-50">
              <tr class="text-xs">
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider text-center">#</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider text-center">File</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider text-center">Title</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider text-center">Date</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider text-center">Actions</th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-cyan-200">
              {% for a in archive %}
              <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                <td class="p-3 whitespace-nowrap text-center">{{ forloop.counter }}</td>
                <td class="p-3 whitespace-nowrap text-center">
                  {% if a.file.name|lower|slice:"-3:" == 'pdf' %}
                    <a href="{{ a.file.url }}" target="_blank" class="text-blue-500 hover:text-blue-700">View PDF</a>
                  {% else %}
                    <img src="{{ a.file.url }}" alt="{{ a.title }}" style="max-width: 100px; max-height: 100px; cursor: pointer; margin: auto;" onclick="openModal('{{ a.file.url }}', '{{ a.title }}')" class="archive-image">
                  {% endif %}
                </td>
                <td class="p-3 whitespace-nowrap text-center">{{ a.title }}</td>
                <td class="p-3 whitespace-nowrap text-center">{{ a.updated}}</td>
                <td class="p-3 whitespace-nowrap text-center">
                  <a href="{% url 'update_archive' a.id %}" class="text-blue-500 hover:text-blue-700 fa-lg mr-2">
                    <i class="fas fa-edit"></i>
                  </a>
                  <a href="{% url 'delete_archive' a.id %}" class="text-red-500 hover:text-red-700 fa-lg" onclick="return confirm('Are you sure you want to delete this file?');">
                    <i class="fas fa-trash"></i>
                  </a>
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>      
      <!-- Modal for full-size image -->
      <div id="imageModal" class="modal" onclick="closeModal()">
        <span class="close" onclick="closeModal()">&times;</span>
        <img class="modal-content" id="modalImage">
        <div id="modalCaption"></div>
      </div>
    <!-- break -->
      <!-- break -->
    <!-- break -->
<!-- end  -->
  </div>
</div>
<style>
  .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      padding-top: 100px;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0,0,0,0.9);
  }

  .modal-content {
      margin: auto;
      display: block;
      width: 80%;
      max-width: 700px;
  }

  #modalCaption {
      margin: auto;
      display: block;
      width: 80%;
      max-width: 700px;
      text-align: center;
      color: #ccc;
      padding: 10px 0;
      height: 150px;
  }

  .close {
      position: absolute;
      top: 15px;
      right: 35px;
      color: #f1f1f1;
      font-size: 40px;
      font-weight: bold;
      transition: 0.3s;
  }

  .close:hover,
  .close:focus {
      color: #bbb;
      text-decoration: none;
      cursor: pointer;
  }
</style>
<script>
  function openModal(imageUrl, imageTitle) {
      var modal = document.getElementById("imageModal");
      var modalImg = document.getElementById("modalImage");
      var captionText = document.getElementById("modalCaption");
      
      modal.style.display = "block";
      modalImg.src = imageUrl;
      captionText.innerHTML = imageTitle;
  }

  function closeModal() {
      var modal = document.getElementById("imageModal");
      modal.style.display = "none";
  }

  // Close the modal when clicking outside the image
  window.onclick = function(event) {
      var modal = document.getElementById("imageModal");
      if (event.target == modal) {
          modal.style.display = "none";
      }
  }
</script>

{% endblock %}
