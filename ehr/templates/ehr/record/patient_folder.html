{%extends "base.html" %}
{% block title %}PATIENT FOLDER{% endblock%}
{%block page_title%}<div class="enom flex justify-center">{{patient.full_name}} FOLDER</div>{%endblock%}
{% block content %}
<div class="p-2">
  <section class="max-w-xl mx-auto text-center border-cyan-700 p-4 m-1">
      {% for message in messages %}
      <div class="">
        <div class="bg-green-100 rounded-2xl text-sm p-4" uk-alert>
          <a href class="uk-alert-close font-bold" uk-close></a>
          <p class="text-green-700 font-semibold">{{ message }}</p>
        </div>
      </div>
      {% endfor %}
    </section>

<div class="md:mx-20 bg-white rounded-xl shadow-black shadow-2xl">
  <div class="text-center rounded-xl md:p-10 bg-gray-50">
<!-- start -->
<!-- top  -->

    <div>
      <a href="{%url 'follow_up' patient.file_no %}" class="text-sm text-green-500 hover:text-green-700">add</a>
    </div>
    <ul class="text-cyan-700 uk-subnav uk-subnav-pill uppercase flex justify-center gap-4 border-b-2 mb-10" uk-switcher="animation: uk-animation-slide-left-medium, uk-animation-slide-right-medium">
      <li><a href="#" class="rounded-lg m-4">BIODATA</a></li>
      <li><a href="#" class="rounded-lg ">PAYMENT</a></li>
      <li><a href="#" class="rounded-lg ">VITAL SIGNS</a></li>
      <li><a href="#" class="rounded-lg ">CLINICAL NOTES</a></li>
      <li><a href="#" class="rounded-lg ">LAB INVESTIGATIONS</a></li>
      <li><a href="#" class="rounded-lg ">PRESCRIPTION</a></li>
      <li><a href="#" class="rounded-lg ">RADIOLOGY</a></li>
      <li><a href="#" class="rounded-lg ">PHYSIO</a></li>
      <li><a href="#" class="rounded-lg ">ADMISSION</a></li>
      <li><a href="#" class="rounded-lg ">THEATRE</a></li>
      <li><a href="#" class="rounded-lg ">ICU</a></li>
      <li><a href="#" class="rounded-lg ">REPORT</a></li>
    </ul>
<!-- top end  -->
    <div class="uk-switcher uk-margin">
      <!-- break -->
      <div class=""> 
        <div class="overflow-x-auto px-4 md:px-10 m-4">
          <table class="min-w-full divide-y divide-cyan-200 mb-4">
              <thead class="bg-cyan-50">
              <tr>
                <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">FILE NUMBER</th>
                <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">NAME</th>
                <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">AGE</th>
                <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">GENDER</th>
                <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">PHONE</th>
                <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">OCCUPATION</th>
                <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">MARITAL STATUS</th>
                <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">RELIGION</th>
                <!-- <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">TRIBE</th> -->
                <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">ADDRESS</th>
                <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">NEXT OF KIN</th>
                <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">RELATIONSHIP WITH NEXT OF KIN</th>
                <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">NEXT OF KIN PHONE</th>
                <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">NEXT OF KIN ADDRESS</th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-cyan-200">
              <tr class="bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                <td class="px-6 py-4">{{ patient.file_no|default_if_none:''|upper}}</td>
                <td class="px-6 py-4">{{ patient.full_name|default_if_none:''|upper}}</td>
                <td class="px-6 py-4">{{ patient.age|default_if_none:''|upper }}</td>
                <td class="px-6 py-4">{{ patient.gender|default_if_none:''|upper }}</td>
                <td class="px-6 py-4">{{ patient.phone|default_if_none:''|upper }}</td>
                <td class="px-6 py-4">{{ patient.occupation|default_if_none:''|upper }}</td>
                <td class="px-6 py-4">{{ patient.marital_status|default_if_none:''|upper }}</td>
                <td class="px-6 py-4">{{ patient.religion|default_if_none:''|upper }}</td>
                <!-- <td class="px-6 py-4">{{ patient.tribe|default_if_none:''|upper }}</td> -->
                <td class="px-6 py-4">{{ patient.address|default_if_none:''|upper }}</td>
                <td class="px-6 py-4">{{ patient.nok_name|default_if_none:''|upper }}</td>
                <td class="px-6 py-4">{{ patient.nok_rel|default_if_none:''|upper }}</td>
                <td class="px-6 py-4">{{ patient.nok_phone|default_if_none:''|upper }}</td>
                <td class="px-6 py-4">{{ patient.nok_addr|default_if_none:''|upper }}</td>
                
              </tr>
            </tbody>
          </table>
        </div>
     </div>
    <!-- break -->
      <!-- break -->
      <div> 
        <div>
        <a href="#" class="text-sm text-green-500 hover:text-green-700">add</a>
      </div>     
        <div class="overflow-x-auto px-4 md:px-10 m-4">
          <table class="min-w-full divide-y divide-cyan-200 mb-4">
            <thead class="bg-cyan-50">
              <tr>
                <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-cyan-200">
              
              <tr class="bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                <td class="px-6 py-4 whitespace-nowrap">{{ forloop.counter }}</td>
              </tr>

            </tbody>
          </table>
        </div>
     </div>
    <!-- break -->
      <!-- break -->
      <div> 
        <div>
        <a href="{%url 'vital_signs' patient.file_no%}" class="text-sm text-green-500 hover:text-green-700">add</a>
      </div>     
        <div class="overflow-x-auto px-4 md:px-10 m-4">
          <table class="min-w-full divide-y divide-cyan-200 mb-4">
            <thead class="bg-cyan-50">
              <tr>
                <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">body temperature</th>
                <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">pulse rate</th>
                <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">respiration rate</th>
                <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">blood pressure</th>
                <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">blood oxygen</th>
                <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">blood glucose</th>
                <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">height</th>
                <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">weight</th>
                <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">date</th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-cyan-200">
              {%for v in vitals %}
              <tr class="bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                <td class="px-6 py-4 whitespace-nowrap">{{ forloop.counter }}</td>
                <td class="px-6 py-4 whitespace-nowrap">{{ v.body_temperature }}</td>
                <td class="px-6 py-4 whitespace-nowrap">{{ v.pulse_rate }}</td>
                <td class="px-6 py-4 whitespace-nowrap">{{ v.respiration_rate }}</td>
                <td class="px-6 py-4 whitespace-nowrap">{{ v.blood_pressure }}</td>
                <td class="px-6 py-4 whitespace-nowrap">{{ v.blood_oxygen }}</td>
                <td class="px-6 py-4 whitespace-nowrap">{{ v.blood_glucose }}</td>
                <td class="px-6 py-4 whitespace-nowrap">{{ v.weight }}</td>
                <td class="px-6 py-4 whitespace-nowrap">{{ v.height }}</td>
                <td class="px-6 py-4 whitespace-nowrap">{{ v.updated }}</td>
              </tr>
              {%empty%}
              <div class="p-4">
                  <p>No vital signs found for this patient yet.</p>
              </div>
         {%endfor%}
            </tbody>
          </table>
        </div>
     </div>
    <!-- break -->
      <!-- break -->
      <div> 
        <div>
        <a href="{%url 'clinical_note' patient.file_no%}" class="text-sm text-green-500 hover:text-green-700">add</a>
      </div>     
        <div class="overflow-x-auto px-4 md:px-10 m-4">
          <table class="min-w-full divide-y divide-cyan-200 mb-4">
            <thead class="bg-cyan-50">
              <tr>
                <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">DOCTOR</th>
                <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">NOTE</th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-cyan-200">
              {% for c in clinical_notes %}
              <tr class="bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                <td class="px-6 py-4 whitespace-nowrap">{{ forloop.counter }}</td>
                <td class="px-6 py-4 whitespace-nowrap">{{ c.user }}</td>
                <td class="px-6 py-4 whitespace-nowrap">{{ c.note.html|safe }}</td>
              </tr>
            <a href="{% url 'new_appointment' patient.file_no %}" class="text-sm text-green-500 hover:text-green-700">appointment</a>
              {%empty%}
              <div class="p-4">
                  <p>No clinical notes found for this patient yet.</p>
              </div>
         {%endfor%}
            </tbody>
          </table>
        </div>
     </div>
    <!-- break -->
      <!-- break -->
      <div> 
        <div class="max-w-7xl mx-auto bg-white rounded-xl shadow-black shadow-2xl">
          <div class="text-center rounded-xl p-4 md:p-10 bg-gray-50">
            <ul class="uk-subnav uk-subnav-pill uppercase flex justify-center gap-4 " uk-switcher="animation: uk-animation-slide-left-medium, uk-animation-slide-right-medium">
              <li ><a href="#" class="rounded-lg ">HEMATOLOGY</a></li>
              <li class=><a href="#" class="rounded-lg ">MICROBIOLOGY</a></li>
              <li><a href="#" class="rounded-lg ">CHEMICAL PATHOLOGY</a></li>
              <li><a href="#" class="rounded-lg ">SEROLOGY</a></li>
              <li><a href="#" class="rounded-lg ">GENERAL</a></li>
            </ul>
            
            <div class="uk-switcher uk-margin">
              <div> 
            
                <div >
                <a href="{% url 'pathology:hematology_test' patient.file_no %}" class="text-sm text-green-500 hover:text-green-700">add</a>
                </div>
             
                <div class="overflow-x-auto px-4 md:px-10 m-4">
                  <table class="min-w-full divide-y divide-cyan-200 mb-4">
                    <thead class="bg-cyan-50">
                      <tr>
                        <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                        <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Test</th>
                        <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Date Collected</th>
                        <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Result</th>
                        <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Comment</th>
                        <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Date Reported</th>
                        <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Actions</th>
                      </tr>
            
                    </thead>
                    <tbody class="bg-white divide-y divide-cyan-200">
                      {% for h in hematology_results %}
                      <tr class="bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                        <td class="px-6 py-4 whitespace-nowrap">{{ forloop.counter }}</td>
                        <td class="px-6 py-4 whitespace-nowrap">{{ h.test|default_if_none:''}}</td>
                        <td class="px-6 py-4 whitespace-nowrap">{{ h.collected|default_if_none:'' }}</td>
                        <td class="px-6 py-4 whitespace-nowrap">
                          <span class="text-sm">{{ h.result.html|safe }}</span>
                          <span class="text-xs">{{ h.unit|default_if_none:'' }}</span>
                          <span class="text-sm">
                            {% for parameter in h.hema_parameters.all %}
                            <p><a href="{% url 'pathology:hema_param' parameter.id %}" class="text-green-500 hover:text-green-700">{{ parameter.name }}: {{ parameter.value }}
                            </a></p>
                        {% endfor %}
                          </span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">{{ h.comment|default_if_none:'' }}</td>
                        <td class="px-6 py-4 whitespace-nowrap">{{ h.reported|default_if_none:'' }}</td>
                        <td class="px-6 py-4 whitespace-nowrap">
                          <a href="{% url 'pathology:hematology_result' h.patient.file_no h.id %}" class="text-green-500 hover:text-green-700">input result</a>
                        </td>
                      </tr>
                      {% endfor %}
                    </tbody>
                  </table>
                </div>
             </div>
            
              <div>
                <div>
                  <a href="{% url 'pathology:micro_test' patient.file_no %}" class="text-sm text-green-500 hover:text-green-700">add</a>
                </div>
                <div class="overflow-x-auto px-4 md:px-10 m-4">
                  <table class="min-w-full divide-y divide-cyan-200 mb-4">
                    <thead class="bg-cyan-50">
            
                      <tr>
                        <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                        <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Test</th>
                        <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Date Collected</th>
                        <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Result</th>
                        <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Comment</th>
                        <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Date Reported</th>
                        <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Actions</th>
                      </tr>
            
                    </thead>
                    <tbody class="bg-white divide-y divide-cyan-200">
                      {% for m in micro_results %}
                      <tr class="bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                        <td class="px-6 py-4 whitespace-nowrap">{{ forloop.counter }}</td>
                        <td class="px-6 py-4 whitespace-nowrap">{{ m.test|default_if_none:''}}</td>
                        <td class="px-6 py-4 whitespace-nowrap">{{ m.collected|default_if_none:'' }}</td>
                        <td class="px-6 py-4 whitespace-nowrap">
                          <span class="text-sm">{{ m.result|default_if_none:'' }}</span>
                          <span class="text-xs">{{ m.unit|default_if_none:'' }}</span>
                          <span class="text-sm">
                          {% for parameter in m.micro_parameters.all %}
                          <p><a href="{% url 'pathology:micro_param' parameter.id %}" class="text-green-500 hover:text-green-700">{{ parameter.name }}: {{ parameter.value }}
                          </a></p>
                      {% endfor %}
                        </span></td>
                        <td class="px-6 py-4 whitespace-nowrap">{{ m.comment|default_if_none:'' }}</td>
                        <td class="px-6 py-4 whitespace-nowrap">{{ m.reported|default_if_none:'' }}</td>
                        <td class="px-6 py-4 whitespace-nowrap">
                          <a href="{% url 'pathology:micro_result' m.patient.file_no m.id %}" class="text-green-500 hover:text-green-700">input result</a>
                        </td>
                      </tr>
                      {% endfor %}
                    </tbody>
                  </table>
                </div>
            
              </div>
            
            
              <div>
                <div>
                  <a href="{% url 'pathology:chempath_test' patient.file_no %}" class="text-sm text-green-500 hover:text-green-700">add</a>
                </div>
                <div class="overflow-x-auto px-4 md:px-10 m-4">
                  <table class="min-w-full divide-y divide-cyan-200 mb-4">
                    <thead class="bg-cyan-50">
            
                      <tr>
                        <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                        <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Test</th>
                        <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Date Collected</th>
                        <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Result</th>
                        <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Comment</th>
                        <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Date Reported</th>
                        <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Actions</th>
                      </tr>
            
                    </thead>
                    <tbody class="bg-white divide-y divide-cyan-200">
                      {% for c in chempath_results %}
                      <tr class="bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                        <td class="px-6 py-4 whitespace-nowrap">{{ forloop.counter }}</td>
                        <td class="px-6 py-4 whitespace-nowrap">{{ c.test|default_if_none:''}}</td>
                        <td class="px-6 py-4 whitespace-nowrap">{{ c.collected|default_if_none:'' }}</td>
                        <td class="px-6 py-4 whitespace-nowrap">
                          <span class="text-sm">{{ c.result|default_if_none:'' }}</span>
                          <span class="text-xs">{{ c.unit|default_if_none:'' }}</span>
                          <span class="text-sm">
                            {% for parameter in c.chempath_parameters.all %}
                            <p><a href="{% url 'pathology:chempath_param' parameter.id %}" class="text-green-500 hover:text-green-700">{{ parameter.name }}: {{ parameter.value }}
                            </a></p>
                        {% endfor %}
                          </span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">{{ c.comment|default_if_none:'' }}</td>
                        <td class="px-6 py-4 whitespace-nowrap">{{ c.reported|default_if_none:'' }}</td>
                        <td class="px-6 py-4 whitespace-nowrap">
                          <a href="{% url 'pathology:chempath_result' c.patient.file_no c.id %}" class="text-green-500 hover:text-green-700">input result</a>
                        </td>
                      </tr>
                      {% endfor %}
                    </tbody>
                  </table>
                </div>
              </div>
            
              <div>
                <div>
                  <a href="{% url 'pathology:serology_test' patient.file_no %}" class="text-sm text-green-500 hover:text-green-700">add</a>
                      </div>
                      <div class="overflow-x-auto px-4 md:px-10 m-4">    
                        <table class="min-w-full divide-y divide-cyan-200 mb-4">
                          <thead class="bg-cyan-50">
                            <tr>
                              <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                              <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Test</th>
                              {% comment %} <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Reference Range</th> {% endcomment %}
                              <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Date Collected</th>
                              <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Result</th>
                              <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Comment</th>
                              <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Date Reported</th>
                              <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Actions</th>
                            </tr>
                  
                          </thead>
                          <tbody class="bg-white divide-y divide-cyan-200">
                            {% for s in serology_results %}
                            <tr class="bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                              <td class="px-6 py-4 whitespace-nowrap">{{ forloop.counter }}</td>
                              <td class="px-6 py-4 whitespace-nowrap">{{ s.test.name|default_if_none:''}}</td>
                              {% comment %} <td class="px-6 py-4 whitespace-nowrap">{{ s.test.reference_range|default_if_none:''}}</td> {% endcomment %}
                              <td class="px-6 py-4 whitespace-nowrap">{{ s.collected|default_if_none:'' }}</td>
                              <td class="px-6 py-4 whitespace-nowrap">
                                <span>{{ s.result|default_if_none:'' }}</span>
                                <span class="text-xs">{{ s.unit|default_if_none:'' }}</span>
                                <span class="text-sm">
                                  {% for parameter in s.serology_parameters.all %}
                                  <p><a href="{% url 'pathology:serology_param' parameter.id %}" class="text-green-500 hover:text-green-700">{{ parameter.name }}: {{ parameter.value }}
                                  </a></p>
                              {% endfor %}
                                </span>
                              </td>
                              <td class="px-6 py-4 whitespace-nowrap">{{ s.comments|default_if_none:'' }}</td>
                              <td class="px-6 py-4 whitespace-nowrap">{{ s.reported|default_if_none:'' }}</td>
                              <td class="px-6 py-4 whitespace-nowrap">
                                <a href="{% url 'pathology:serology_result' s.id %}" class="text-green-500 hover:text-green-700">input result</a>
                                </td>
                            </tr>
                            {% endfor %}
                          </tbody>
                        </table>
                      </div>          
              </div>
            
            
              <div>
                <div>
                  <a href="{% url 'pathology:general_test' patient.file_no %}" class="text-sm text-green-500 hover:text-green-700">add</a>
                  </div>
                  <div class="overflow-x-auto px-4 md:px-10 m-4">
                    <table class="min-w-full divide-y divide-cyan-200 mb-4">
                      <thead class="bg-cyan-50">
              
                        <tr>
                          <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                          <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Test</th>
                          <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Date Collected</th>
                          <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Result</th>
                          <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Comment</th>
                          <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Date Reported</th>
                          <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Actions</th>
                        </tr>
              
                      </thead>
                      <tbody class="bg-white divide-y divide-cyan-200">
                        {% for g in general_results %}
                        <tr class="bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                          <td class="px-6 py-4 whitespace-nowrap">{{ forloop.counter }}</td>
                          <td class="px-6 py-4 whitespace-nowrap">{{ g.name|default_if_none:''}}</td>
                          <td class="px-6 py-4 whitespace-nowrap">{{ g.collected|default_if_none:'' }}</td>
                          <td class="px-6 py-4 whitespace-nowrap">
                            <span class="text-sm">{{ g.result|default_if_none:'' }}</span>
                            <span class="text-xs">{{ g.unit|default_if_none:'' }}</span>
                          </td>
                          <td class="px-6 py-4 whitespace-nowrap">{{ g.comment|default_if_none:'' }}</td>
                          <td class="px-6 py-4 whitespace-nowrap">{{ g.reported|default_if_none:'' }}</td>
                          <td class="px-6 py-4 whitespace-nowrap">
                            <a href="{% url 'pathology:general_result' g.patient.file_no g.id %}" class="text-green-500 hover:text-green-700">input result</a>
                          </td>
                        </tr>
                        {% endfor %}
                      </tbody>
                    </table>
                  </div>
              </div>        
            </div>
      
      </div>
      </div>     </div>
    <!-- break -->
      <!-- break -->
      <div> 
        <div>    
        <!-- Dispensary Form Section -->
        <a href="{% url 'pharm:add_prescription' patient.file_no %}" class="text-sm text-green-500 hover:text-green-700"><i class="fa-solid fa-prescriptiong fa-2xl"></i></a>

      </div>     
        <div class="overflow-x-auto px-4 md:px-10 m-4">
          <table class="min-w-full divide-y divide-cyan-200 mb-4">
            <thead class="bg-cyan-50">
              <tr>
                <th class="px-6 py-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                <th class="px-6 py-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Prescribed Drugs</th>
                <th class="px-6 py-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Date Prescribed</th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-cyan-200">
              {% for p in prescribed_drugs %}
              <tr class="bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                <td class="px-6 py-4 whitespace-nowrap">{{ forloop.counter }}</td>
                <td class="px-6 py-4 whitespace-nowrap">{{ p.drug|default_if_none:''}}</td>
                <td class="px-6 py-4 whitespace-nowrap">{{ p.quantity|default_if_none:''}}</td>
                <td class="px-6 py-4 whitespace-nowrap">{{ p.updated}}</td>
              </tr>
              {%endfor%}
            </tbody>
          </table>
        </div>
     </div>
    <!-- break -->
      <!-- break -->
      <div> 
     </div>
    <!-- break -->
      <!-- break -->
      <div> 
        <div>
        <a href="#" class="text-sm text-green-500 hover:text-green-700">add</a>
      </div>     
        <div class="overflow-x-auto px-4 md:px-10 m-4">
          <table class="min-w-full divide-y divide-cyan-200 mb-4">
            <thead class="bg-cyan-50">
              <tr>
                <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-cyan-200">
              
              <tr class="bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                <td class="px-6 py-4 whitespace-nowrap">{{ forloop.counter }}</td>
              </tr>

            </tbody>
          </table>
        </div>
     </div>
    <!-- break -->
      <!-- break -->
      <div> 
        <div>
        <a href="#" class="text-sm text-green-500 hover:text-green-700">add</a>
      </div>     
        <div class="overflow-x-auto px-4 md:px-10 m-4">
          <table class="min-w-full divide-y divide-cyan-200 mb-4">
            <thead class="bg-cyan-50">
              <tr>
                <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-cyan-200">
              
              <tr class="bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                <td class="px-6 py-4 whitespace-nowrap">{{ forloop.counter }}</td>
              </tr>

            </tbody>
          </table>
        </div>
     </div>
    <!-- break -->
      <!-- break -->
      <div> 
        <div>
        <a href="#" class="text-sm text-green-500 hover:text-green-700">add</a>
      </div>     
        <div class="overflow-x-auto px-4 md:px-10 m-4">
          <table class="min-w-full divide-y divide-cyan-200 mb-4">
            <thead class="bg-cyan-50">
              <tr>
                <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-cyan-200">
              
              <tr class="bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                <td class="px-6 py-4 whitespace-nowrap">{{ forloop.counter }}</td>
              </tr>

            </tbody>
          </table>
        </div>
     </div>
    <!-- break -->
      <!-- break -->
      <div> 
        <div>
        <a href="#" class="text-sm text-green-500 hover:text-green-700">add</a>
      </div>     
        <div class="overflow-x-auto px-4 md:px-10 m-4">
          <table class="min-w-full divide-y divide-cyan-200 mb-4">
            <thead class="bg-cyan-50">
              <tr>
                <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-cyan-200">
              
              <tr class="bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                <td class="px-6 py-4 whitespace-nowrap">{{ forloop.counter }}</td>
              </tr>

            </tbody>
          </table>
        </div>
     </div>
    <!-- break -->
    <!-- break -->
      <div> 
        <div>
        <a href="#" class="text-sm text-green-500 hover:text-green-700">add</a>
      </div>     
        <div class="overflow-x-auto px-4 md:px-10 m-4">
          <table class="min-w-full divide-y divide-cyan-200 mb-4">
            <thead class="bg-cyan-50">
              <tr>
                <th class="px-6 py-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-cyan-200">
              
              <tr class="bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                <td class="px-6 py-4 whitespace-nowrap">{{ forloop.counter }}</td>
              </tr>

            </tbody>
          </table>
        </div>
     </div>
    <!-- break -->
<!-- end  -->
  </div>
</div>
<script>
  function initializePage() {
      function load_drugs(categoryField) {
          const categoryId = categoryField.value;
          const form = categoryField.closest('.md\\:flex');
          const drugSelect = form.querySelector('[name$="-drug"]');
          const url = `/pharm/get_drugs_by_category/${categoryId}/`;

          fetch(url)
              .then(response => response.json())
              .then(data => {
                  drugSelect.innerHTML = ''; // Clear existing options
                  data.drugs.forEach(drug => {
                      const option = document.createElement('option');
                      option.value = drug.id;
                      option.text = drug.name;
                      drugSelect.add(option);
                  });
              })
              .catch(error => console.error('Error:', error));
      }

      document.querySelectorAll('select[name$="-category"]').forEach(categoryField => {
          categoryField.addEventListener('change', function() {
              load_drugs(this);
          });
      });
  }

  window.addEventListener('load', initializePage);
</script>
{% endblock %}
