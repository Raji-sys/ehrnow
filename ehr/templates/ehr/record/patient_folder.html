{%extends "base.html" %}
{%load static%}
{% block title %}PATIENT FOLDER{% endblock%}
{%block page_title%}
<div class="bg-white shadow-sm rounded-lg p-2 mb-2 flex flex-col sm:flex-row justify-between items-center">
  <div class="flex flex-col sm:flex-row items-center mb-4 sm:mb-0">
      <h1 class="text-lg font-semibold text-gray-800 mb-2 sm:mb-0 sm:mr-4">{{patient.full_name}}</h1>
      <div class="bg-emerald-100 rounded-full px-4 py-2 flex items-center">
          <span class="text-emerald-700 font-medium mr-2">Wallet Balance:</span>
          <span class="text-emerald-800 font-bold">â‚¦{{ patient.wallet.balance|floatformat:2 }}</span>
      </div>
  </div>
  <a href="{% url 'fund_wallet' patient.id %}" class="bg-amber-600 hover:bg-amber-700 text-white font-medium py-2 px-4 rounded-full transition duration-300 ease-in-out flex items-center">
      <i class="fas fa-wallet mr-2"></i>
      Fund Wallet
  </a>
</div>
{%endblock%}
{% block content %}

<div class="">
  <section class="max-w-xl mx-auto text-center border-cyan-700 p-1 m-1">
      {% for message in messages %}
      <div class="">
        <div class="bg-green-100 rounded-2xl text-xs p-2" uk-alert>
          <a href class="uk-alert-close font-bold text-rose-900" uk-close></a>
          <p class="text-green-700  uppercase">{{ message }}</p>
        </div>
      </div>
      {% endfor %}
    </section>

<div class="md:mx-20  rounded-xl shadow-black shadow-sm mx-2 text-xs ">
  <div class="text-center rounded-xl md:p-8 p-2 bg-gray-50 uppercase max-h[40vh]">
<!-- start -->
<!-- top  -->
<style>
  .uk-subnav-pill > * > :first-child {
      padding: 0.25rem 1rem;
      background-color: transparent;
      transition: background-color 0.3s, color 0.3s;
  }
  .uk-subnav-pill > * > a:hover {
      background-color: rgba(6, 182, 212, 0.1);
      color: rgb(21, 94, 117);
  }
</style>
<ul class="text-xs text-cyan-700 uk-subnav uk-subnav-pill uppercase flex flex-wrap justify-center gap-2 border-b-2 border-cyan-200 mb-3  bg-gray-50" uk-switcher="animation: uk-animation-slide-left-medium, uk-animation-slide-right-medium">
  <li><a href="#" class="rounded-lg">BIODATA</a></li>
  <li><a href="#" class="rounded-lg">VISIT</a></li>
  <li><a href="#" class="rounded-lg">WALLET TRANSACTION HISTORY</a></li>
  <li><a href="#" class="rounded-lg">PAYMENT HISTORY</a></li>
  <li><a href="#" class="rounded-lg">VITAL SIGNS</a></li>
  <li><a href="#" class="rounded-lg">CLINICAL NOTES</a></li>
  <li><a href="#" class="rounded-lg">APPOINTMENTS</a></li>
  <li><a href="#" class="rounded-lg">LAB INVESTIGATIONS</a></li>
  <li><a href="#" class="rounded-lg">PRESCRIPTION</a></li>
  <li><a href="#" class="rounded-lg">RADIOLOGY</a></li>
  <li><a href="#" class="rounded-lg">PHYSIO</a></li>
  <li><a href="#" class="rounded-lg">ADMISSION</a></li>
  <li><a href="#" class="rounded-lg">SURGERY BILL</a></li>
  <li><a href="#" class="rounded-lg">WARD</a></li>
  <li><a href="#" class="rounded-lg">THEATRE</a></li>
  <li><a href="#" class="rounded-lg">ARCHIVE AND FILES</a></li>
</ul>
<!-- top end  -->
    <div class="uk-switcher uk-margin ">
      <!-- break -->
      <div class=""> 
        <div class="overflow-x-auto max-h-[50vh] p-2">
          <table class="min-w-full divide-y divide-cyan-200 mb-4">
              <thead class="bg-cyan-50">
              <tr class=" text-xs">
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">FILE NUMBER</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">NAME</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">AGE</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">GENDER</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">PHONE</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">OCCUPATION</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">MARITAL STATUS</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">RELIGION</th>
                <!-- <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">TRIBE</th> -->
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">ADDRESS</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">NEXT OF KIN</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">RELATIONSHIP WITH NEXT OF KIN</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">NEXT OF KIN PHONE</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">NEXT OF KIN ADDRESS</th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-cyan-200">
              <tr class="bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300 text-xs">
                <td class=" p-3">{{ patient.file_no|default_if_none:''|upper}}</td>
                <td class=" p-3">{{ patient.full_name|default_if_none:''|upper}}</td>
                <td class=" p-3">{{ patient.age|default_if_none:''|upper }}</td>
                <td class=" p-3">{{ patient.gender|default_if_none:''|upper }}</td>
                <td class=" p-3">{{ patient.phone|default_if_none:''|upper }}</td>
                <td class=" p-3">{{ patient.occupation|default_if_none:''|upper }}</td>
                <td class=" p-3">{{ patient.marital_status|default_if_none:''|upper }}</td>
                <td class=" p-3">{{ patient.religion|default_if_none:''|upper }}</td>
                <!-- <td class=" p-3">{{ patient.tribe|default_if_none:''|upper }}</td> -->
                <td class=" p-3">{{ patient.address|default_if_none:''|upper }}</td>
                <td class=" p-3">{{ patient.nok_name|default_if_none:''|upper }}</td>
                <td class=" p-3">{{ patient.nok_rel|default_if_none:''|upper }}</td>
                <td class=" p-3">{{ patient.nok_phone|default_if_none:''|upper }}</td>
                <td class=" p-3">{{ patient.nok_addr|default_if_none:''|upper }}</td>
                
              </tr>
            </tbody>
          </table>
        </div>
     </div>
      <div class="">
        <div>
          <a href="{%url 'visit_record' patient.file_no%}" class="text-xs text-green-600 hover:text-green-700"><i class="fa-solid fa-plus fa-2xl"></i></a>
        </div>        
        <div class="overflow-x-auto max-h-[50vh] p-2">
          <table class="min-w-full divide-y divide-cyan-200 mb-4">
            <thead class="bg-cyan-50">
              <tr class=" text-xs">
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">CLINIC</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">TEAM</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">REASON</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">DATE</th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-cyan-200">
              {%for v in visits %}
              <tr class="bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300 text-xs">
                <td class=" p-3">{{ v.clinic|default_if_none:''|upper}}</td>
                <td class=" p-3">{{ v.team|default_if_none:''|upper}}</td>
                <td class=" p-3">{{ v.record|default_if_none:''|upper}}</td>
                <td class=" p-3">{{ v.updated|default_if_none:''}}</td>
                
              </tr>
              {%endfor%}
            </tbody>
          </table>
        </div>
     </div>
    <!-- break -->
      <!-- break -->
      <div> 
        <div class="overflow-x-auto max-h-[50vh] p-2">
          <table class="min-w-full divide-y divide-cyan-200 mb-4">
            <thead class="bg-cyan-50">
              <tr class="text-xs">
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">TRANSACTION</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">DESCRIPTION</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">AMOUNT</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">DATE</th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-cyan-200">
              {%for w in wallet %}
              <tr class="uppercase bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300 text-xs ">
                <td class=" p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                {% if w.transaction_type == 'DEBIT' %}
                <td class=" p-3 whitespace-nowrap text-red-700">
                  <i class="fa-solid fa-minus-circle text-red-700 fa-2xl"></i> {{w.transaction_type}}
                </td>
                {% else %}
                <td class=" p-3 whitespace-nowrap text-green-700">
                  <i class="fa-solid fa-plus-circle fa-2xl"></i> {{w.transaction_type}}
                </td>
                {% endif %}
                <td class=" p-3 whitespace-nowrap">{{ w.description }}</td>
                <td class=" p-3 whitespace-nowrap text-green-700">&#x20A6;{{ w.amount }}</td>
                <td class=" p-3 whitespace-nowrap text-green-700">{{ w.created_at }}</td>
              </tr>
              {%empty%}
              <div class="p-2">
                  <p>No payments found yet</p>
              </div>
             {%endfor%}
            </tbody>
          </table>
        </div>
     </div>
    <!-- break -->
      <!-- break -->

      <!-- break -->
      <!-- break -->
      <div> 
        <div class="overflow-x-auto max-h-[50vh] p-2">
          <table class="min-w-full divide-y divide-cyan-200 mb-4">
            <thead class="bg-cyan-50">
              <tr class="text-xs">
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">SERVICE</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">PRICE</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">PAYMENT STATUS</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">DATE</th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-cyan-200">
              {%for p in payments %}
              <tr class="uppercase bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300 text-xs ">
                <td class=" p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                <td class=" p-3 whitespace-nowrap">{{ p.service }}</td>
                <td class=" p-3 whitespace-nowrap text-green-700">&#x20A6;{{ p.price }}</td>
                {% if p.status == False %}
                <td class=" p-3 whitespace-nowrap text-red-700">
                  <i class="fa-solid fa-x text-red-700 fa-2xl"></i>
                </td>
                {% else %}
                <td class=" p-3 whitespace-nowrap text-green-700">
                  <i class="fa-solid fa-thumbs-up fa-2xl"></i>
                </td>
                {% endif %}
                <td class=" p-3 whitespace-nowrap">{{ p.updated }}</td>
              </tr>
              {%empty%}
              <div class="p-2">
                  <p>No payments found yet</p>
              </div>
             {%endfor%}
            </tbody>
          </table>
          <div class="mt-2">
            <!-- times: {{paid_transactions_count}} -->
            <span class="uppercase text-sm">
          Total amount: <span class="text-green-700 uppercase text-sm ">
            &#x20A6;{{ total_amount|floatformat:2 }}
          </span>
        </span>
        </div>
        </div>
     </div>
    <!-- break -->
      <!-- break -->
      <div> 
        <div>
        <a href="{%url 'vital_signs' patient.file_no%}" class="text-xs text-green-600 hover:text-green-700"><i class="fa-solid fa-heartbeat fa-2xl"></i></a>
      </div>     
        <div class="overflow-x-auto max-h-[50vh] p-2">
          <table class="min-w-full divide-y divide-cyan-200 mb-4">
            <thead class="bg-cyan-50">
              <tr class="text-xs">
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Nurse</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">body temperature</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">pulse rate</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">respiration rate</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">blood pressure</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">blood oxygen</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">blood glucose</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">weight</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">height</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">date</th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-cyan-200">
              {%for v in vitals %}
              <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300 normal-case">
                <td class=" p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                <td class=" p-3 whitespace-nowrap uppercase">{{ v.user }}</td>
                <td class=" p-3 whitespace-nowrap">{%if v.body_temperature %}{{ v.body_temperature|default:'' }}K{%else%}{%endif%}</td>
                <td class=" p-3 whitespace-nowrap">{%if v.pulse_rate %}{{ v.pulse_rate }}BPM{%else%}{%endif%}</td>
                <td class=" p-3 whitespace-nowrap">{%if v.respiration_rate %}{{ v.respiration_rate }}BPM{%else%}{%endif%}</td>
                <td class=" p-3 whitespace-nowrap">{%if v.blood_pressure %}{{ v.blood_pressure }}mmHg{%else%}{%endif%}</td>
                <td class=" p-3 whitespace-nowrap">{%if v.blood_oxygen %}{{ v.blood_oxygen }}%{%else%}{%endif%}</td>
                <td class=" p-3 whitespace-nowrap">{%if v.blood_glucose %}{{ v.blood_glucose }}mmol/L{%else%}{%endif%}</td>
                <td class=" p-3 whitespace-nowrap">{%if v.weight %}{{ v.weight }}kg{%else%}{%endif%}</td>
                <td class=" p-3 whitespace-nowrap">{%if v.height %}{{ v.height }}m{%else%}{%endif%}</td>
                <td class=" p-3 whitespace-nowrap">{{ v.updated }}</td>
              </tr>
              {%empty%}
              <div class="p-2">
                  <p>No vital signs yet</p>
              </div>
         {%endfor%}
            </tbody>
          </table>
        </div>
     </div>
    <!-- break -->
      <!-- break -->
      <div> 
        <div>
        <a href="{%url 'clinical_note' patient.file_no%}" class="text-xs text-green-600 hover:text-green-700"><i class="fa-solid fa-notes-medical fa-2xl"></i></a>
      </div>     

        <div class="overflow-x-auto max-h-[50vh] p-2">
          <table class="min-w-full divide-y divide-cyan-200 mb-4">
            <thead class="bg-cyan-50">
              <tr class="text-xs">
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">DOCTOR</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">NOTE</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">DIAGNOSIS</th>
                <!-- <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">APPOINTMENT</th> -->
                <!-- <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">UPDATE REVIEW STATUS</th>  -->
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">DATE CONSULTED</th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-cyan-200">
              {% for c in clinical_notes %}
              <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                <td class=" p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                <td class=" p-3 whitespace-nowrap">{{ c.user }}</td>
                <td class=" p-3 whitespace-nowrap">
                  <details>
                    <summary class="bg-blue-600 p-2 text-white rounded-lg text-center">OPEN NOTE</summary>
                    <div class="bg-white text-blue-600 h-fit text-xs well-sm overflow-x-auto max-h-[50vh] rounded-md m-4">
                      <p class="text-xs text-center">{{ c.note.html|safe }}</p>
                    </div>
                  </details>
                </td>
                <td class=" p-3 whitespace-nowrap">{{ c.diagnosis|default_if_none:'' }}</td>
                <!-- <td class=" p-3 whitespace-nowrap">{{ c.appointment|default_if_none:'' }}</td> -->
                <!-- <td class=" p-3 whitespace-nowrap"><a href="{%url 'clinical_note_update' c.id%}" class="text-xs text-green-600 hover:text-green-700"><i class="fa-solid fa-pen-fancy fa-2xl"></i></a> -->
                  <td class=" p-3 whitespace-nowrap">{{ c.updated }}</td>
                </td>
              </tr>
              {%empty%}
              <div class="p-2">
                  <p>No clinical notes yet</p>
              </div>
         {%endfor%}
            </tbody>
          </table>
        </div>
     </div>
    <!-- break -->
      <!-- break -->
           <!-- break -->
      <!-- break -->
      <div> 
        <div>
        <a href="{%url 'new_appointment' patient.file_no%}" class="text-xs text-green-600 hover:text-green-700"><i class="fa-solid fa-calendar-week fa-2xl"></i></a>
      </div>     

        <div class="overflow-x-auto max-h-[50vh] p-2">
          <table class="min-w-full divide-y divide-cyan-200 mb-4">
            <thead class="bg-cyan-50">
              <tr class="text-xs">
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">CLINIC</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">TEAM</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">DATE</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">TIME</th>
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">DATE CONSULTED</th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-cyan-200">
              {% for a in appointments %}
              <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                <td class=" p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                <td class=" p-3 whitespace-nowrap">{{ a.clinic }}</td>
                <td class=" p-3 whitespace-nowrap">{{ a.team|default_if_none:'' }}</td>
                <td class=" p-3 whitespace-nowrap">{{ a.date|default_if_none:'' }}</td>
                <td class=" p-3 whitespace-nowrap">{{ a.time|default_if_none:'' }}</td>
                  <td class=" p-3 whitespace-nowrap">{{ a.created_at }}</td>
                </td>
              </tr>
              {%empty%}
              <div class="p-2">
                  <p>No appointments yet</p>
              </div>
         {%endfor%}
            </tbody>
          </table>
        </div>
     </div>
    <!-- break -->
      <!-- break -->
      <div> 
          <div class="text-center rounded-xl p-2 md:p-10 bg-gray-50">
            
            <!-- from here  -->
            <ul class="uk-subnav uk-subnav-pill uppercase flex justify-center gap-8" uk-switcher="animation: uk-animation-slide-left-medium, uk-animation-slide-right-medium">
              <li ><a href="#" class="rounded-lg ">HEMATOLOGY</a></li>
              <li><a href="#" class="rounded-lg ">CHEMICAL PATHOLOGY</a></li>
              <li class=><a href="#" class="rounded-lg ">MICROBIOLOGY</a></li>
              <li><a href="#" class="rounded-lg ">SEROLOGY</a></li>
              <li><a href="#" class="rounded-lg ">GENERAL</a></li>
            </ul>
            
            <div class="uk-switcher uk-margin">
      
              <!-- new lab -->
              <div> 
                <div class="text-center rounded-xl p-2 m-4  md:p-10 bg-gray-50">
                  <ul class="uk-subnav uk-subnav-pill uppercase flex justify-center gap-2 " uk-switcher="animation: uk-animation-slide-left-medium, uk-animation-slide-right-medium">
                    <li><a href="#" class="rounded-lg ">blood group</a></li>
                    <li><a href="#" class="rounded-lg ">genotype</a></li>
                    <li><a href="#" class="rounded-lg ">full blood count</a></li>
                  </ul>
                  
                  <div class="uk-switcher uk-margin">
             
                    <div>
                      <div>
                    <a href="{% url 'results:create_blood_group' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700">
                        <i class="fa-solid fa-plus fa-2xl"></i> SEND REQUEST
                    </a>
      
                      </div>
                      <div class="overflow-x-auto max-h-[50vh] p-2">
                        <table class="min-w-full divide-y divide-cyan-200 mb-4">
                          <thead class="bg-cyan-50">
                            <tr class="text-xs">
                              <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                              <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Code</th>
                              <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Date</th>
                              <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">result</th>
                            </tr>
                          </thead>
                          <tbody class="bg-white divide-y divide-cyan-200">
                            {% for test_info in blood_group %}
                            <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                              <td class=" p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                              <td class=" p-3 whitespace-nowrap">{{ test_info.id|default_if_none:'N/A'}}</td>
                              <td class=" p-3 whitespace-nowrap">{{ test_info.updated|default_if_none:'N/A' }}</td>
                              <td class="p-3 whitespace-nowrap">  <a href="{% url 'results:instance_pdf' test_info.id %}" class="text-xs hover:text-green-700">
                                <i class="fa-solid fa-eye fa-2xl"></i> </a>
                                </td>            
                              </tr>
                            {%empty%}
                            <tr>
                              <td colspan="10" class="p-3 text-center">blood group test yet.</td>
                          </tr>
                          {% endfor %}
                          </tbody>
                        </table>
                      </div>
                    </div>
                  
                  <!-- new test -->
                  <div>
                    <div>
                  <a href="{% url 'results:create_genotype' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700">
                      <i class="fa-solid fa-plus fa-2xl"></i> SEND REQUEST
                  </a>
                    </div>
                    <div class="overflow-x-auto max-h-[50vh] p-2">
                      <table class="min-w-full divide-y divide-cyan-200 mb-4">
                        <thead class="bg-cyan-50">
                
                          <tr class="text-xs">
                            <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                            <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">id</th>
                            <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Date</th>
                          <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">result</th>
                          </tr>
                
                        </thead>
                        <tbody class="bg-white divide-y divide-cyan-200">
                          {% for test_info in genotype %}
                          <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                              <td class="p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                              <td class="p-3 whitespace-nowrap">{{ test_info.id|default_if_none:'N/A' }}</td>
                              <td class="p-3 whitespace-nowrap">{{ test_info.updated|default_if_none:'N/A' }}</td>
                          <td class="p-3 whitespace-nowrap">  <a href="{% url 'results:instance_pdf' test_info.id %}" class="text-xs hover:text-green-700">
                            <i class="fa-solid fa-eye fa-2xl"></i> </a>
                            </td>            
                          </tr>
                          {% empty %}
                          <tr>
                              <td colspan="5" class="p-3 text-center">No genotype tests available.</td>
                          </tr>
                          {% endfor %}
                        </tbody>
                      </table>
                    </div>
                  </div>  
                 <!-- new test   -->
                  
                  <!-- new test -->
      
                 <!-- new test   -->            
                  
                    <div>
                      <div>
                    <a href="{% url 'results:create_fbc' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700">
                        <i class="fa-solid fa-plus fa-2xl"></i> SEND REQUEST
                    </a>
                      </div>
                      <div class="overflow-x-auto max-h-[50vh] p-2">
                        <table class="min-w-full divide-y divide-cyan-200 mb-4">
                          <thead class="bg-cyan-50">
                  
                            <tr class="text-xs">
                              <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                              <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">id</th>
                              <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Date</th>
                              <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">result</th>
                            </tr>
                  
                          </thead>
                          <tbody class="bg-white divide-y divide-cyan-200">
                            {% for test_info in fbc %}
                            <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                                <td class="p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                                <td class="p-3 whitespace-nowrap">{{ test_info.id|default_if_none:'N/A' }}</td>
                            <td class="p-3 whitespace-nowrap">{{ test_info.updated|default_if_none:'N/A' }}</td>
                                <td class="p-3 whitespace-nowrap">  <a href="{% url 'results:instance_pdf' test_info.id %}" class="text-xs  hover:text-green-700">
                                  <i class="fa-solid fa-eye fa-2xl"></i> </a>
                            </td>
                            </tr>
                            {% empty %}
                            <tr>
                                <td colspan="5" class="p-3 text-center">No blood group tests available.</td>
                            </tr>
                            {% endfor %}
                          </tbody>
                        </table>
                      </div>
                    </div>  
      
      
                  
            </div>    
            </div>
             </div>
      <!-- new lab  -->      
              <!-- new lab -->
              <div> 
                <div class="text-center rounded-xl p-2 m-4  md:p-10 bg-gray-50">
                  <ul class="uk-subnav uk-subnav-pill uppercase flex justify-center gap-2 " uk-switcher="animation: uk-animation-slide-left-medium, uk-animation-slide-right-medium">
                    <li ><a href="#" class="rounded-lg ">Urea & Electrolyte/Creatinine</a></li>
                    <li><a href="#" class="rounded-lg ">Liver function</a></li>
                    <li><a href="#" class="rounded-lg ">lipid profile</a></li>
                    <li><a href="#" class="rounded-lg ">Bone chemistry</a></li>
                    <li><a href="#" class="rounded-lg ">serum proteins</a></li>
                    <li><a href="#" class="rounded-lg ">cerebo spinal fluid</a></li>
                    <li><a href="#" class="rounded-lg ">blood glucose</a></li>
                    <li><a href="#" class="rounded-lg ">miscellaneous</a></li>
                  </ul>
                  
                  <div class="uk-switcher uk-margin">
             
                    <div>
                      <div>
                    <a href="{% url 'results:create_urea_electrolyte' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700">
                        <i class="fa-solid fa-plus fa-2xl"></i> SEND REQUEST
                    </a>
      
                      </div>
                      <div class="overflow-x-auto max-h-[50vh] p-2">
                        <table class="min-w-full divide-y divide-cyan-200 mb-4">
                          <thead class="bg-cyan-50">
                            <tr class="text-xs">
                              <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                              <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Code</th>
                              <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Date</th>
                              <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">result</th>
                            </tr>
                          </thead>
                          <tbody class="bg-white divide-y divide-cyan-200">
                            {% for test_info in urea_electrolyte %}
                            <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                              <td class=" p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                              <td class=" p-3 whitespace-nowrap">{{ test_info.id|default_if_none:'N/A'}}</td>
                              <td class=" p-3 whitespace-nowrap">{{ test_info.updated|default_if_none:'N/A' }}</td>
                              <td class="p-3 whitespace-nowrap">  <a href="{% url 'results:instance_pdf' test_info.id %}" class="text-xs hover:text-green-700">
                                <i class="fa-solid fa-eye fa-2xl"></i> </a>
                          </td>
                            </tr>
                            {%empty%}
                            <tr>
                              <td colspan="10" class="p-3 text-center">No Urea & Electrolyte test yet.</td>
                          </tr>
                          {% endfor %}
                          </tbody>
                        </table>
                      </div>
                    </div>
                  
                    <!-- new test -->
                  
                  <!-- new test  -->
                  <div>
                    <div>
                      <a href="{%url 'results:create_liver_function' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700"><i class="fa-solid fa-plus fa-2xl"></i> SEND REQUEST</a>
                    </div>
                    <div class="overflow-x-auto max-h-[50vh] p-2">
                      <table class="min-w-full divide-y divide-cyan-200 mb-4">
                        <thead class="bg-cyan-50">
                          <tr class="text-xs">
                            <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                            <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">id</th>
                            <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">date</th>
                            <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">result</th>
                          </tr>
        
                        </thead>
                        <tbody class="bg-white divide-y divide-cyan-200">
                          {%for test_info in liver_function %}
                          <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                            <td class=" p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                            <td class=" p-3 whitespace-nowrap">{{ test_info.id|default_if_none:'N/A' }}</td>
                            <td class=" p-3 whitespace-nowrap">{{ test_info.updated|default_if_none:'N/A' }}</td>
                            <td class="p-3 whitespace-nowrap">  <a href="{% url 'results:instance_pdf' test_info.id %}" class="text-xs hover:text-green-700">
                              <i class="fa-solid fa-eye fa-2xl"></i> </a>
                        </td>
                          </tr>
                          {%empty%}
                          <tr>
                            <td colspan="9" class="p-3 text-center">No liver function test yet.</td>
                        </tr>
                        {% endfor %}
                        </tbody>
                      </table>
                    </div>
                  </div>  
                
                  <!-- new test  -->
                
                  <div>
                    <div>
                      <a href="{%url 'results:create_lipid_profile' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700"><i class="fa-solid fa-plus fa-2xl"></i> SEND REQUEST</a>
                    </div>
                    <div class="overflow-x-auto max-h-[50vh] p-2">
                      <table class="min-w-full divide-y divide-cyan-200 mb-4">
                        <thead class="bg-cyan-50">
                
                          <tr class="text-xs">
                            <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                            <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">id</th>
                            <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Date</th>
                            <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">result</th>
                          </tr>
                
                        </thead>
                        <tbody class="bg-white divide-y divide-cyan-200">
                          {%for test_info in lipid_profile %}
                          <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                            <td class=" p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                            <td class=" p-3 whitespace-nowrap">{{ test_info.id|default_if_none:'N/A' }}</td>
                            <td class=" p-3 whitespace-nowrap">{{ test_info.updated }}</td>
                            <td class=" p-3 whitespace-nowrap"> <a href="{%url 'results:instance_pdf' test_info.id %}" class=" hover:text-green-700">
                              <i class="fa-solid fa-eye fa-2xl"></i></a></td>
                          </tr>
                          {%empty%}
                          <tr>
                            <td colspan="7" class="p-3 text-center">No lipid profile test yet.</td>
                        </tr>
                        {% endfor %}
                        </tbody>
                      </table>
                    </div>
                  </div>  
                
                <!-- new test  -->
      
                <!-- new test  -->
                  <div>
                    <div>
                      <a href="{%url 'results:create_bone_chemistry' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700"><i class="fa-solid fa-plus fa-2xl"></i> SEND REQUEST</a>
                    </div>
                    <div class="overflow-x-auto max-h-[50vh] p-2">
                      <table class="min-w-full divide-y divide-cyan-200 mb-4">
                        <thead class="bg-cyan-50">
                          <tr class="text-xs">
                            <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                            <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">id</th>
                            <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">date</th>
                            <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">result</th>
                          </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-cyan-200">
                          {%for test_info in bone_chemistry %}
                          <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                            <td class=" p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                            <td class=" p-3 whitespace-nowrap">{{ test_info.id|default_if_none:'N/A' }}</td>
                            <td class=" p-3 whitespace-nowrap">{{ test_info.updated|default_if_none:'N/A' }}</td>
                            <td class=" p-3 whitespace-nowrap">  <a href="{%url 'results:instance_pdf' test_info.id %}" class=" hover:text-green-700">
                              <i class="fa-solid fa-eye fa-2xl"></i></a></td> 
                          </tr>
                          {%empty%}
                          <tr>
                            <td colspan="6" class="p-3 text-center">No bone chemistry test yet.</td>
                        </tr>
                        {% endfor %}
                        </tbody>
                      </table>
                    </div>
                  </div>  
                
                  <!-- new test  -->
                
                  <div>
                    <div>
                      <a href="{%url 'results:create_serum_proteins' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700"><i class="fa-solid fa-plus fa-2xl"></i> SEND REQUEST</a>
                    </div>
                    <div class="overflow-x-auto max-h-[50vh] p-2">
                      <table class="min-w-full divide-y divide-cyan-200 mb-4">
                        <thead class="bg-cyan-50">
                
                          <tr class="text-xs">
                            <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                            <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">id</th>
                            <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Date</th>
                            <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">result</th>
                          </tr>
                
                        </thead>
                        <tbody class="bg-white divide-y divide-cyan-200">
                          {%for test_info in serum_proteins %}
                          <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                            <td class=" p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                            <td class=" p-3 whitespace-nowrap">{{ test_info.id|default_if_none:'N/A' }}</td>
                            <td class=" p-3 whitespace-nowrap">{{ test_info.updated }}</td>
                            <td class=" p-3 whitespace-nowrap"> <a href="{%url 'results:instance_pdf'  test_info.id %}" class=" hover:text-green-700">
                              <i class="fa-solid fa-eye fa-2xl"></i></a></td>
                          </tr>
                          {%empty%}
                          <tr>
                            <td colspan="7" class="p-3 text-center">No serum proteins test yet.</td>
                        </tr>
                        {% endfor %}
                        </tbody>
                      </table>
                    </div>
                  </div>  
                
                <!-- new test  -->
      
                <!-- new test  -->
                  <div>
                    <div>
                      <a href="{%url 'results:create_cerebro_spinal_fluid' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700"><i class="fa-solid fa-plus fa-2xl"></i> SEND REQUEST</a>
                    </div>
                    <div class="overflow-x-auto max-h-[50vh] p-2">
                      <table class="min-w-full divide-y divide-cyan-200 mb-4">
                        <thead class="bg-cyan-50">
                          <tr class="text-xs">
                            <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                            <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">id</th>
                            <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">date</th>
                            <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">result</th>
                          </tr>
        
                        </thead>
                        <tbody class="bg-white divide-y divide-cyan-200">
                          {%for test_info in cerebro_spinal_fluid %}
                          <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                            <td class=" p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                            <td class=" p-3 whitespace-nowrap">{{ test_info.id|default_if_none:'N/A' }}</td>
                            <td class=" p-3 whitespace-nowrap">{{ test_info.updated|default_if_none:'N/A' }}</td>
                            <td class=" p-3 whitespace-nowrap">  <a href="{%url 'results:instance_pdf' test_info.id %}" class=" hover:text-green-700">
                              <i class="fa-solid fa-eye fa-2xl"></i></a></td> 
                          </tr>
                          {%empty%}
                          <tr>
                            <td colspan="6" class="p-3 text-center">No cerebo spinal fluid test yet.</td>
                        </tr>
                        {% endfor %}
                        </tbody>
                      </table>
                    </div>
                  </div>  
                
                  <!-- new test  -->
                
                  <div>
                    <div>
                      <a href="{%url 'results:create_blood_glucose' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700"><i class="fa-solid fa-plus fa-2xl"></i> SEND REQUEST</a>
                    </div>
                    <div class="overflow-x-auto max-h-[50vh] p-2">
                      <table class="min-w-full divide-y divide-cyan-200 mb-4">
                        <thead class="bg-cyan-50">
                
                          <tr class="text-xs">
                            <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                            <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">id</th>
                            <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Date</th>
                            <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">result</th>
                          </tr>
                
                        </thead>
                        <tbody class="bg-white divide-y divide-cyan-200">
                          {%for test_info in blood_glucose %}
                          <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                            <td class=" p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                            <td class=" p-3 whitespace-nowrap">{{ test_info.id|default_if_none:'N/A' }}</td>
                            <td class=" p-3 whitespace-nowrap">{{ test_info.updated }}</td>
                            <td class=" p-3 whitespace-nowrap"> <a href="{%url 'results:instance_pdf' test_info.id %}" class=" hover:text-green-700">
                              <i class="fa-solid fa-eye fa-2xl"></i></a></td>
                          </tr>
                          {%empty%}
                          <tr>
                            <td colspan="5" class="p-3 text-center">No blood glucose test yet.</td>
                        </tr>
                        {% endfor %}
                        </tbody>
                      </table>
                    </div>
                  </div>  
                
                <!-- new test  -->
      
                <!-- new test  -->
                  <div>
                    <div>
                      <a href="{%url 'results:create_miscellaneous_chempath_tests' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700"><i class="fa-solid fa-plus fa-2xl"></i> SEND REQUEST</a>
                    </div>
                    <div class="overflow-x-auto max-h-[50vh] p-2">
                      <table class="min-w-full divide-y divide-cyan-200 mb-4">
                        <thead class="bg-cyan-50">
                          <tr class="text-xs">
                            <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                            <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">id</th>
                            <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">date</th>
                            <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">result</th>
                          </tr>
        
                        </thead>
                        <tbody class="bg-white divide-y divide-cyan-200">
                          {%for test_info in miscellaneous_chempath_tests %}
                          <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                            <td class=" p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                            <td class=" p-3 whitespace-nowrap">{{ test_info.id|default_if_none:'N/A' }}</td>
                            <td class=" p-3 whitespace-nowrap">{{ test_info.updated|default_if_none:'N/A' }}</td>
                            <td class=" p-3 whitespace-nowrap">  <a href="{%url 'results:instance_pdf' test_info.id %}" class=" hover:text-green-700">
                              <i class="fa-solid fa-eye fa-2xl"></i></a></td> 
                          </tr>
                          {%empty%}
                          <tr>
                            <td colspan="9" class="p-3 text-center">No miscellaneous test  yet.</td>
                        </tr>
                        {% endfor %}
                        </tbody>
                      </table>
                    </div>
                  </div>  
                
                  <!-- new test  -->
                
                  
            </div>    
            </div>
      
             </div>
      <!-- new lab  -->      
      
      <!-- new lab -->
              <div> 
                <div class="text-center rounded-xl p-2 m-4  md:p-10 bg-gray-50">
                  <ul class="uk-subnav uk-subnav-pill uppercase flex justify-center gap-2 " uk-switcher="animation: uk-animation-slide-left-medium, uk-animation-slide-right-medium">
                    <li ><a href="#" class="rounded-lg ">Urine (M/C/S) </a></li>
                    <li><a href="#" class="rounded-lg ">HVS (M/C/S)</a></li>
                    <li><a href="#" class="rounded-lg ">Stool (M/C/S)</a></li>
                    <li><a href="#" class="rounded-lg ">blood culture</a></li>
                    <li><a href="#" class="rounded-lg ">occult blood</a></li>
                    <li><a href="#" class="rounded-lg ">sputum (M/C/S)</a></li>
                    <li><a href="#" class="rounded-lg ">gram stain</a></li>
                    <li><a href="#" class="rounded-lg ">swab/pus/aspirate (M/C/S)</a></li>
                    <li><a href="#" class="rounded-lg ">zn stain</a></li>
                    <li><a href="#" class="rounded-lg ">semen analysis</a></li>
                    <li><a href="#" class="rounded-lg ">urinalysis</a></li>
                    <li><a href="#" class="rounded-lg ">pregnancy test</a></li>
                  </ul>
                  
                  <div class="uk-switcher uk-margin">
             
                    <div>
                      <div>
                    <a href="{% url 'results:create_urine_microscopy' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700">
                        <i class="fa-solid fa-plus fa-2xl"></i> SEND REQUEST
                    </a>
      
                      </div>
                      <div class="overflow-x-auto max-h-[50vh] p-2">
                        <table class="min-w-full divide-y divide-cyan-200 mb-4">
                          <thead class="bg-cyan-50">
                            <tr class="text-xs">
                              <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                              <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Code</th>
                              <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Pus cells</th>
                              <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">rbc</th>
                              <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">epithelial cells</th>
                              <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">casts</th>
                              <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Crystals</th>
                              <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">ova</th>
                              <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Date</th>
                              <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">input result</th>
                            </tr>
                          </thead>
                          <tbody class="bg-white divide-y divide-cyan-200">
                            {% for test_info in urine_microscopy%}
                            <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                              <td class=" p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                              <td class=" p-3 whitespace-nowrap">{{ test_info.id|default_if_none:'N/A'}}</td>
                              <td class=" p-3 whitespace-nowrap">{{ test_info.urine_test.pus_cells|default_if_none:'N/A'}}</td>
                              <td class=" p-3 whitespace-nowrap">{{ test_info.urine_test.rbc|default_if_none:'N/A' }}</td>
                              <td class=" p-3 whitespace-nowrap">{{ test_info.urine_test.epithelial_cells|default_if_none:'N/A' }}</td>
                              <td class=" p-3 whitespace-nowrap">{{ test_info.urine_test.casts|default_if_none:'N/A' }}</td>
                              <td class=" p-3 whitespace-nowrap">{{ test_info.urine_test.crystals|default_if_none:'N/A' }}</td>
                              <td class=" p-3 whitespace-nowrap">{{ test_info.urine_test.ova|default_if_none:'N/A' }}</td>
                              <td class=" p-3 whitespace-nowrap">{{ test_info.updated|default_if_none:'N/A' }}</td>
                              <td class="p-3 whitespace-nowrap">  <a href="{% url 'results:update_urine_microscopy' patient.file_no test_info.id %}" class="text-xs hover:text-green-700">
                                <i class="fa-solid fa-edit fa-2xl"></i> </a>
                          </td>
                            </tr>
                            {%empty%}
                            <tr>
                              <td colspan="10" class="p-3 text-center">No Urine microscopy test yet.</td>
                          </tr>
                          {% endfor %}
                          </tbody>
                        </table>
                      </div>
                    </div>
                                <!-- new test  -->
                                <div>
                                  <!-- HVS Section -->
                                  <div>
                                    <a href="{% url 'results:create_hvs' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700">
                                      <i class="fa-solid fa-plus fa-2xl"></i> SEND REQUEST
                                    </a>
                                  </div>
                                  <div class="overflow-x-auto max-h-[50vh] p-2">
                                    <table class="min-w-full divide-y divide-cyan-200 mb-4">
                                      <thead class="bg-cyan-50">
                                        <tr class="text-xs">
                                          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                                          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Code</th>
                                          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Pus cells</th>
                                          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">RBC</th>
                                          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Epithelial cells</th>
                                          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">T. vaginalis</th>
                                          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Yeast cells</th>
                                          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Date</th>
                                          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Input result</th>
                                        </tr>
                                      </thead>
                                      <tbody class="bg-white divide-y divide-cyan-200">
                                        {% for test_info in hvs %}
                                        <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                                          <td class="p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                                          <td class="p-3 whitespace-nowrap">{{ test_info.id|default_if_none:'N/A' }}</td>
                                          <td class="p-3 whitespace-nowrap">{{ test_info.hvs_test.pus_cells|default_if_none:'N/A' }}</td>
                                          <td class="p-3 whitespace-nowrap">{{ test_info.hvs_test.rbc|default_if_none:'N/A' }}</td>
                                          <td class="p-3 whitespace-nowrap">{{ test_info.hvs_test.epithelial_cells|default_if_none:'N/A' }}</td>
                                          <td class="p-3 whitespace-nowrap">{{ test_info.hvs_test.t_vaginalis|default_if_none:'N/A' }}</td>
                                          <td class="p-3 whitespace-nowrap">{{ test_info.hvs_test.yeast_cells|default_if_none:'N/A' }}</td>
                                          <td class="p-3 whitespace-nowrap">{{ test_info.updated|default_if_none:'N/A' }}</td>
                                          <td class="p-3 whitespace-nowrap">
                                            <a href="{% url 'results:update_hvs' patient.file_no test_info.id %}" class="text-xs hover:text-green-700">
                                              <i class="fa-solid fa-edit fa-2xl"></i>
                                            </a>
                                          </td>
                                        </tr>
                                        {% empty %}
                                        <tr>
                                          <td colspan="11" class="p-3 text-center">No HVS test yet.</td>
                                        </tr>
                                        {% endfor %}
                                      </tbody>
                                    </table>
                                  </div>
                                </div>
                                
                                <!-- Stool Section -->
                                <div>
                                  <div>
                                    <a href="{% url 'results:create_stool' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700">
                                      <i class="fa-solid fa-plus fa-2xl"></i> SEND REQUEST
                                    </a>
                                  </div>
                                  <div class="overflow-x-auto max-h-[50vh] p-2">
                                    <table class="min-w-full divide-y divide-cyan-200 mb-4">
                                      <thead class="bg-cyan-50">
                                        <tr class="text-xs">
                                          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                                          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Code</th>
                                          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Consistency</th>
                                          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Color</th>
                                          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Mucus</th>
                                          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Blood</th>
                                          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Ova</th>
                                          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Cyst</th>
                                          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Date</th>
                                          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Input result</th>
                                        </tr>
                                      </thead>
                                      <tbody class="bg-white divide-y divide-cyan-200">
                                        {% for test_info in stool %}
                                        <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                                          <td class="p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                                          <td class="p-3 whitespace-nowrap">{{ test_info.id|default_if_none:'N/A' }}</td>
                                          <td class="p-3 whitespace-nowrap">{{ test_info.stool_test.consistency|default_if_none:'N/A' }}</td>
                                          <td class="p-3 whitespace-nowrap">{{ test_info.stool_test.color|default_if_none:'N/A' }}</td>
                                          <td class="p-3 whitespace-nowrap">{{ test_info.stool_test.mucus|default_if_none:'N/A' }}</td>
                                          <td class="p-3 whitespace-nowrap">{{ test_info.stool_test.blood|default_if_none:'N/A' }}</td>
                                          <td class="p-3 whitespace-nowrap">{{ test_info.stool_test.ova|default_if_none:'N/A' }}</td>
                                          <td class="p-3 whitespace-nowrap">{{ test_info.stool_test.cyst|default_if_none:'N/A' }}</td>
                                          <td class="p-3 whitespace-nowrap">{{ test_info.updated|default_if_none:'N/A' }}</td>
                                          <td class="p-3 whitespace-nowrap">
                                            <a href="{% url 'results:update_stool' patient.file_no test_info.id %}" class="text-xs hover:text-green-700">
                                              <i class="fa-solid fa-edit fa-2xl"></i>
                                            </a>
                                          </td>
                                        </tr>
                                        {% empty %}
                                        <tr>
                                          <td colspan="12" class="p-3 text-center">No Stool test yet.</td>
                                        </tr>
                                        {% endfor %}
                                      </tbody>
                                    </table>
                                  </div>
                                </div>
                                <!-- new test  -->
      <!-- Previous content remains the same -->
      
      <!-- Blood Culture Section -->
      <div>
        <div>
          <a href="{% url 'results:create_blood_culture' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700">
            <i class="fa-solid fa-plus fa-2xl"></i> SEND REQUEST
          </a>
        </div>
        <div class="overflow-x-auto max-h-[50vh] p-2">
          <table class="min-w-full divide-y divide-cyan-200 mb-4">
            <thead class="bg-cyan-50">
              <tr class="text-xs">
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Code</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Result</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Date</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Input result</th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-cyan-200">
              {% for test_info in blood_culture %}
              <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                <td class="p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.id|default_if_none:'N/A' }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.blood_culture_test.result|default_if_none:'N/A' }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.updated|default_if_none:'N/A' }}</td>
                <td class="p-3 whitespace-nowrap">
                  <a href="{% url 'results:update_blood_culture' patient.file_no test_info.id %}" class="text-xs hover:text-green-700">
                    <i class="fa-solid fa-edit fa-2xl"></i>
                  </a>
                </td>
              </tr>
              {% empty %}
              <tr>
                <td colspan="6" class="p-3 text-center">No Blood Culture test yet.</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
      
      <!-- Occult Blood Section -->
      <div>
        <div>
          <a href="{% url 'results:create_occult_blood' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700">
            <i class="fa-solid fa-plus fa-2xl"></i> SEND REQUEST
          </a>
        </div>
        <div class="overflow-x-auto max-h-[50vh] p-2">
          <table class="min-w-full divide-y divide-cyan-200 mb-4">
            <thead class="bg-cyan-50">
              <tr class="text-xs">
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Code</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Result</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Date</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Input result</th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-cyan-200">
              {% for test_info in occult_blood %}
              <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                <td class="p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.id|default_if_none:'N/A' }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.occult_blood_test.result|default_if_none:'N/A' }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.updated|default_if_none:'N/A' }}</td>
                <td class="p-3 whitespace-nowrap">
                  <a href="{% url 'results:update_occult_blood' patient.file_no test_info.id %}" class="text-xs hover:text-green-700">
                    <i class="fa-solid fa-edit fa-2xl"></i>
                  </a>
                </td>
              </tr>
              {% empty %}
              <tr>
                <td colspan="7" class="p-3 text-center">No Occult Blood test yet.</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
      
      <!-- Sputum MCS Section -->
      <div>
        <div>
          <a href="{% url 'results:create_sputum_mcs' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700">
            <i class="fa-solid fa-plus fa-2xl"></i> SEND REQUEST
          </a>
        </div>
        <div class="overflow-x-auto max-h-[50vh] p-2">
          <table class="min-w-full divide-y divide-cyan-200 mb-4">
            <thead class="bg-cyan-50">
              <tr class="text-xs">
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Code</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Date</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Input result</th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-cyan-200">
              {% for test_info in sputum_mcs %}
              <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                <td class="p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.id|default_if_none:'N/A' }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.updated|default_if_none:'N/A' }}</td>
                <td class="p-3 whitespace-nowrap">
                  <a href="{% url 'results:update_sputum_mcs' patient.file_no test_info.id %}" class="text-xs hover:text-green-700">
                    <i class="fa-solid fa-edit fa-2xl"></i>
                  </a>
                </td>
              </tr>
              {% empty %}
              <tr>
                <td colspan="6" class="p-3 text-center">No Sputum MCS test yet.</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
      
      <!-- Previous content remains the same -->
      
      <!-- Gram Stain Section -->
      <div>
        <div>
          <a href="{% url 'results:create_gram_stain' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700">
            <i class="fa-solid fa-plus fa-2xl"></i> SEND REQUEST
          </a>
        </div>
        <div class="overflow-x-auto max-h-[50vh] p-2">
          <table class="min-w-full divide-y divide-cyan-200 mb-4">
            <thead class="bg-cyan-50">
              <tr class="text-xs">
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Code</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Sample Type</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Gram Stain Findings</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Other Findings</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Date</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Input result</th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-cyan-200">
              {% for test_info in gram_stain %}
              <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                <td class="p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.id|default_if_none:'N/A' }}</td>
                <td class="p-3 whitespace-nowrap">
                  {% if test_info.gram_stain_test.urine %}Urine{% endif %}
                  {% if test_info.gram_stain_test.hvs %}HVS{% endif %}
                  {% if test_info.gram_stain_test.swab %}Swab{% endif %}
                  {% if test_info.gram_stain_test.pus %}Pus{% endif %}
                  {% if test_info.gram_stain_test.aspirate %}Aspirate{% endif %}
                  {% if test_info.gram_stain_test.sputum %}Sputum{% endif %}
                </td>
                <td class="p-3 whitespace-nowrap">
                  {% if test_info.gram_stain_test.gram_positive_cocci %}Gram +ve cocci{% endif %}
                  {% if test_info.gram_stain_test.gram_negative_cocci %}Gram -ve cocci{% endif %}
                  {% if test_info.gram_stain_test.gram_positive_rods %}Gram +ve rods{% endif %}
                  {% if test_info.gram_stain_test.gram_negative_rods %}Gram -ve rods{% endif %}
                  {% if test_info.gram_stain_test.gram_positive_clusters %}Gram +ve clusters{% endif %}
                  {% if test_info.gram_stain_test.gram_negative_clusters %}Gram -ve clusters{% endif %}
                  {% if test_info.gram_stain_test.gram_positive_chains %}Gram +ve chains{% endif %}
                  {% if test_info.gram_stain_test.gram_negative_chains %}Gram -ve chains{% endif %}
                </td>
                <td class="p-3 whitespace-nowrap">{{ test_info.gram_stain_test.other_findings|default_if_none:'N/A' }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.updated|default_if_none:'N/A' }}</td>
                <td class="p-3 whitespace-nowrap">
                  <a href="{% url 'results:update_gram_stain' patient.file_no test_info.id %}" class="text-xs hover:text-green-700">
                    <i class="fa-solid fa-edit fa-2xl"></i>
                  </a>
                </td>
              </tr>
              {% empty %}
              <tr>
                <td colspan="9" class="p-3 text-center">No Gram Stain test yet.</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
      
      <!-- swab pus aspirate Section -->
      <div>
        <div>
          <a href="{% url 'results:create_swab_pus_aspirate_mcs' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700">
            <i class="fa-solid fa-plus fa-2xl"></i> SEND REQUEST
          </a>
        </div>
        <div class="overflow-x-auto max-h-[50vh] p-2">
          <table class="min-w-full divide-y divide-cyan-200 mb-4">
            <thead class="bg-cyan-50">
              <tr class="text-xs">
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Code</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Date</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Input result</th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-cyan-200">
              {% for test_info in swab_pus_aspirate_mcs  %}
              <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                <td class="p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.id|default_if_none:'N/A' }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.updated|default_if_none:'N/A' }}</td>
                <td class="p-3 whitespace-nowrap">
                  <a href="{% url 'results:update_swab_pus_aspirate_mcs' patient.file_no test_info.id %}" class="text-xs hover:text-green-700">
                    <i class="fa-solid fa-edit fa-2xl"></i>
                  </a>
                </td>
              </tr>
              {% empty %}
              <tr>
                <td colspan="9" class="p-3 text-center">swab_pus_aspirate test yet.</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
      
      <!-- ZN Stain Section -->
      <div>
        <div>
          <a href="{% url 'results:create_zn_stain' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700">
            <i class="fa-solid fa-plus fa-2xl"></i> SEND REQUEST
          </a>
        </div>
        <div class="overflow-x-auto max-h-[50vh] p-2">
          <table class="min-w-full divide-y divide-cyan-200 mb-4">
            <thead class="bg-cyan-50">
              <tr class="text-xs">
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Code</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">First Sample</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Second Sample</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Third Sample</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Date</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Input result</th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-cyan-200">
              {% for test_info in zn_stain %}
              <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                <td class="p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.id|default_if_none:'N/A' }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.zn_stain_test.first_sample|default_if_none:'N/A' }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.zn_stain_test.second_sample|default_if_none:'N/A' }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.zn_stain_test.third_sample|default_if_none:'N/A' }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.updated|default_if_none:'N/A' }}</td>
                <td class="p-3 whitespace-nowrap">
                  <a href="{% url 'results:update_zn_stain' patient.file_no test_info.id %}" class="text-xs hover:text-green-700">
                    <i class="fa-solid fa-edit fa-2xl"></i>
                  </a>
                </td>
              </tr>
              {% empty %}
              <tr>
                <td colspan="9" class="p-3 text-center">No ZN Stain test yet.</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
      
      <!-- Semen Analysis Section -->
      <div>
        <div>
          <a href="{% url 'results:create_semen_analysis' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700">
            <i class="fa-solid fa-plus fa-2xl"></i> SEND REQUEST
          </a>
        </div>
        <div class="overflow-x-auto max-h-[50vh] p-2">
          <table class="min-w-full divide-y divide-cyan-200 mb-4">
            <thead class="bg-cyan-50">
              <tr class="text-xs">
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Code</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Time Produced</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Time Examined</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Color</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Volume (ml)</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Viscosity</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Consistency</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Motility (%)</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Morphology (%)</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Total Sperm Count</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Date</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Input result</th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-cyan-200">
              {% for test_info in semen_analysis %}
              <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                <td class="p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.id|default_if_none:'N/A' }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.semen_analysis_test.time_produced|time:"H:i"|default_if_none:'N/A' }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.semen_analysis_test.time_examined|time:"H:i"|default_if_none:'N/A' }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.semen_analysis_test.color|default_if_none:'N/A' }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.semen_analysis_test.volume|default_if_none:'N/A' }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.semen_analysis_test.viscosity|default_if_none:'N/A' }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.semen_analysis_test.consistency|default_if_none:'N/A' }}</td>
                <td class="p-3 whitespace-nowrap">
                  Active: {{ test_info.semen_analysis_test.motility_active|default_if_none:'N/A' }}<br>
                  Moderate: {{ test_info.semen_analysis_test.motility_moderate|default_if_none:'N/A' }}<br>
                  Sluggish: {{ test_info.semen_analysis_test.motility_sluggish|default_if_none:'N/A' }}
                </td>
                <td class="p-3 whitespace-nowrap">
                  Normal: {{ test_info.semen_analysis_test.morphology_normal|default_if_none:'N/A' }}<br>
                  Abnormal: {{ test_info.semen_analysis_test.morphology_abnormal|default_if_none:'N/A' }}<br>
                </td>
                <td class="p-3 whitespace-nowrap">{{ test_info.semen_analysis_test.total_sperm_count|default_if_none:'N/A' }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.updated|default_if_none:'N/A' }}</td>
                <td class="p-3 whitespace-nowrap">
                  <a href="{% url 'results:update_semen_analysis' patient.file_no test_info.id %}" class="text-xs hover:text-green-700">
                    <i class="fa-solid fa-edit fa-2xl"></i>
                  </a>
                </td>
              </tr>
              {% empty %}
              <tr>
                <td colspan="13" class="p-3 text-center">No Semen Analysis test yet.</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
      
      <!-- Urinalysis Section -->
      <div>
        <div>
          <a href="{% url 'results:create_urinalysis' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700">
            <i class="fa-solid fa-plus fa-2xl"></i> SEND REQUEST
          </a>
        </div>
        <div class="overflow-x-auto max-h-[50vh] p-2">
          <table class="min-w-full divide-y divide-cyan-200 mb-4">
            <thead class="bg-cyan-50">
              <tr class="text-xs">
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Code</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Color</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Appearance</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Specific Gravity</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">pH</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Protein</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Glucose</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Ketones</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Bilirubin</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Urobilinogen</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Nitrites</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Leukocyte Esterase</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Blood</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Date</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Input result</th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-cyan-200">
              {% for test_info in urinalysis %}
              <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                <td class="p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.id|default_if_none:'N/A' }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.urinalysis_test.color|default_if_none:'N/A' }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.urinalysis_test.appearance|default_if_none:'N/A' }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.urinalysis_test.specific_gravity|default_if_none:'N/A' }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.urinalysis_test.ph|default_if_none:'N/A' }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.urinalysis_test.protein|default_if_none:'N/A' }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.urinalysis_test.glucose|default_if_none:'N/A' }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.urinalysis_test.ketones|default_if_none:'N/A' }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.urinalysis_test.bilirubin|default_if_none:'N/A' }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.urinalysis_test.urobilinogen|default_if_none:'N/A' }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.urinalysis_test.nitrites|default_if_none:'N/A' }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.urinalysis_test.leukocyte_esterase|default_if_none:'N/A' }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.urinalysis_test.blood|default_if_none:'N/A' }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.updated|default_if_none:'N/A' }}</td>
                <td class="p-3 whitespace-nowrap">
                  <a href="{% url 'results:update_urinalysis' patient.file_no test_info.id %}" class="text-xs hover:text-green-700">
                    <i class="fa-solid fa-edit fa-2xl"></i>
                  </a>
                </td>
              </tr>
              {% empty %}
              <tr>
                <td colspan="18" class="p-3 text-center">No Urinalysis test yet.</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
      
      <!-- Pregnancy Test Section -->
      <div>
        <div>
          <a href="{% url 'results:create_pregnancy_test' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700">
            <i class="fa-solid fa-plus fa-2xl"></i> SEND REQUEST
          </a>
        </div>
        <div class="overflow-x-auto max-h-[50vh] p-2">
          <table class="min-w-full divide-y divide-cyan-200 mb-4">
            <thead class="bg-cyan-50">
              <tr class="text-xs">
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Code</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Result</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Nature of Specimen</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Date</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Input result</th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-cyan-200">
              {% for test_info in pregnancy %}
              <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                <td class="p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.id|default_if_none:'N/A' }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.pregnancy_test.result|default_if_none:'N/A' }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.nature_of_specimen|default_if_none:'N/A' }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.updated|default_if_none:'N/A' }}</td>
                <td class="p-3 whitespace-nowrap">
                  <a href="{% url 'results:update_pregnancy_test' patient.file_no test_info.id %}" class="text-xs hover:text-green-700">
                    <i class="fa-solid fa-edit fa-2xl"></i>
                  </a>
                </td>
              </tr>
              {% empty %}
              <tr>
                <td colspan="6" class="p-3 text-center">No Pregnancy test yet.</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
            </div>    
            </div>
      
             </div>
      
             <!-- new lab  -->      
      
             <!-- new lab -->
              <div> 
                <div class="text-center rounded-xl p-2 m-4  md:p-10 bg-gray-50">
                  <ul class="uk-subnav uk-subnav-pill uppercase flex justify-center gap-2 " uk-switcher="animation: uk-animation-slide-left-medium, uk-animation-slide-right-medium">
                    <li ><a href="#" class="rounded-lg ">MP/Widal</a></li>
                    <li><a href="#" class="rounded-lg ">Rheumatoid Factor</a></li>
                    <li><a href="#" class="rounded-lg ">Hepatitis B</a></li>
                    <li><a href="#" class="rounded-lg ">Hepatitis C</a></li>
                    <li><a href="#" class="rounded-lg ">VDRL</a></li>
                    <li><a href="#" class="rounded-lg ">Mantoux</a></li>
                    <li><a href="#" class="rounded-lg ">Aso Titre</a></li>
                    <li><a href="#" class="rounded-lg ">CRP</a></li>
                    <li><a href="#" class="rounded-lg ">HIV SCREENING</a></li>
                  </ul>
                  
                  <div class="uk-switcher uk-margin">
             
      <!-- new test  -->
      <!-- Widal Test Results -->
      <div>
        <div>
          <a href="{% url 'results:create_widal' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700"><i class="fa-solid fa-plus fa-2xl"></i> SEND REQUEST</a>
        </div>
        <div class="overflow-x-auto max-h-[50vh] p-2">
          <table class="min-w-full divide-y divide-cyan-200 mb-4">
            <thead class="bg-cyan-50">
              <tr class="text-xs">
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Code</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">O Antigen S. Typhi D</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">O Antigen S. Paratyphi A</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">O Antigen S. Paratyphi B</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">O Antigen S. Paratyphi C</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">H Antigen S. Typhi D</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">H Antigen S. Paratyphi A</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">H Antigen S. Paratyphi B</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">H Antigen S. Paratyphi C</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Diagnostic Titre</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Date</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider"></th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-cyan-200">
              {% for test_info in widal %}
              <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                <td class="p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.id }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.widal_test.o_antigen_s_typhi_d|default_if_none:'N/A' }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.widal_test.o_antigen_s_paratyphi_a|default_if_none:'N/A' }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.widal_test.o_antigen_s_paratyphi_b|default_if_none:'N/A' }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.widal_test.o_antigen_s_paratyphi_c|default_if_none:'N/A' }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.widal_test.h_antigen_s_typhi_d|default_if_none:'N/A' }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.widal_test.h_antigen_s_paratyphi_a|default_if_none:'N/A' }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.widal_test.h_antigen_s_paratyphi_b|default_if_none:'N/A' }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.widal_test.h_antigen_s_paratyphi_c|default_if_none:'N/A' }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.widal_test.diagnostic_titre }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.updated|default_if_none:'N/A' }}</td>
                <td class="p-3 whitespace-nowrap"><a href="{% url 'results:update_widal' patient.file_no test_info.id %}" class="text-green-600 hover:text-green-700"><i class="fa-solid fa-edit fa-2xl"></i></a></td>
              </tr>
              {% empty %}
              <tr>
                <td colspan="13" class="p-3 text-center">No Widal test yet.</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
      <!-- new test  -->
                  
                  <!-- new test  -->
                    <div>
                      <div>
                        <a href="{%url 'results:create_rheumatoid_factor' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700"><i class="fa-solid fa-plus fa-2xl"></i> SEND REQUEST</a>
                      </div>
                      <div class="overflow-x-auto max-h-[50vh] p-2">
                        <table class="min-w-full divide-y divide-cyan-200 mb-4">
                          <thead class="bg-cyan-50">
                            <tr class="text-xs">
                              <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                              <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">id</th>
                              <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">result</th>
                              <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">date</th>
                              <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider"></th>
                            </tr>
          
                          </thead>
                          <tbody class="bg-white divide-y divide-cyan-200">
                            {%for test_info in rheumatoid_factor %}
                            <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                              <td class=" p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                              <td class=" p-3 whitespace-nowrap">{{ test_info.id }}</td>
                              <td class=" p-3 whitespace-nowrap">{{ test_info.rheumatoid_factor_test.result|default_if_none:'N/A' }}</td>
                              <td class=" p-3 whitespace-nowrap">{{ test_info.updated|default_if_none:'N/A' }}</td>
                              <td class=" p-3 whitespace-nowrap">  <a href="{%url 'results:update_rheumatoid_factor' patient.file_no test_info.id %}" class="text-green-600 hover:text-green-700"><i class="fa-solid fa-edit fa-2xl"></i></a></td> 
                            </tr>
                            {%empty%}
                            <tr>
                              <td colspan="9" class="p-3 text-center">No rheumatoid factor test  yet.</td>
                          </tr>
                          {% endfor %}
                          </tbody>
                        </table>
                      </div>
                    </div>  
                  
                    <!-- new test  -->
                  
      <!-- new test  -->
      <div>
        <div>
          <a href="{%url 'results:create_hpb' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700"><i class="fa-solid fa-plus fa-2xl"></i> SEND REQUEST</a>
        </div>
        <div class="overflow-x-auto max-h-[50vh] p-2">
          <table class="min-w-full divide-y divide-cyan-200 mb-4">
            <thead class="bg-cyan-50">
              <tr class="text-xs">
                <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">id</th>
                <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">result</th>
                <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">date</th>
                <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider"></th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-cyan-200">
              {% for test_info in hpb %}
              <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                <td class="p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.id }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.hpb_test.result|default_if_none:'N/A' }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.updated|default_if_none:'N/A' }}</td>
                <td class="p-3 whitespace-nowrap"><a href="{%url 'results:update_hpb' patient.file_no test_info.id %}" class="text-green-600 hover:text-green-700"><i class="fa-solid fa-edit fa-2xl"></i></a></td>
              </tr>
              {% empty %}
              <tr>
                <td colspan="9" class="p-3 text-center">No Hepatitis B test yet.</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
      <!-- new test  -->
      <div>
        <div>
          <a href="{%url 'results:create_hcv' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700"><i class="fa-solid fa-plus fa-2xl"></i> SEND REQUEST</a>
        </div>
        <div class="overflow-x-auto max-h-[50vh] p-2">
          <table class="min-w-full divide-y divide-cyan-200 mb-4">
            <thead class="bg-cyan-50">
              <tr class="text-xs">
                <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">id</th>
                <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">result</th>
                <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">date</th>
                <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider"></th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-cyan-200">
              {% for test_info in hcv %}
              <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                <td class="p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.id }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.hcv_test.result|default_if_none:'N/A' }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.updated|default_if_none:'N/A' }}</td>
                <td class="p-3 whitespace-nowrap"><a href="{%url 'results:update_hcv' patient.file_no test_info.id %}" class="text-green-600 hover:text-green-700"><i class="fa-solid fa-edit fa-2xl"></i></a></td>
              </tr>
              {% empty %}
              <tr>
                <td colspan="9" class="p-3 text-center">No Hepatitis C test yet.</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
      <!-- new test  -->
      
                  
                  <!-- new test  -->
      <!-- new test  -->
      <div>
        <div>
          <a href="{% url 'results:create_vdrl' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700"><i class="fa-solid fa-plus fa-2xl"></i> SEND REQUEST</a>
        </div>
        <div class="overflow-x-auto max-h-[50vh] p-2">
          <table class="min-w-full divide-y divide-cyan-200 mb-4">
            <thead class="bg-cyan-50">
              <tr class="text-xs">
                <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">id</th>
                <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">result</th>
                <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">date</th>
                <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider"></th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-cyan-200">
              {% for test_info in vdrl %}
              <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                <td class="p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.id }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.vdrl_test.result|default_if_none:'N/A' }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.updated|default_if_none:'N/A' }}</td>
                <td class="p-3 whitespace-nowrap"><a href="{%url 'results:update_vdrl' patient.file_no test_info.id %}" class="text-green-600 hover:text-green-700"><i class="fa-solid fa-edit fa-2xl"></i></a></td>
              </tr>
              {% empty %}
              <tr>
                <td colspan="9" class="p-3 text-center">No VDRL test yet.</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
      <!-- new test  -->
      
                  <!-- new test  -->
      
      
      <!-- Mantoux Test Results -->
      <div>
        <div>
          <a href="{% url 'results:create_mantoux' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700"><i class="fa-solid fa-plus fa-2xl"></i> SEND REQUEST</a>
        </div>
        <div class="overflow-x-auto max-h-[50vh] p-2">
          <table class="min-w-full divide-y divide-cyan-200 mb-4">
            <thead class="bg-cyan-50">
              <tr class="text-xs">
                <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">id</th>
                <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">result</th>
                <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">date</th>
                <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider"></th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-cyan-200">
              {% for test_info in mantoux %}
              <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                <td class="p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.id }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.mantoux_test.result }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.updated|default_if_none:'N/A' }}</td>
                <td class="p-3 whitespace-nowrap"><a href="{% url 'results:update_mantoux' patient.file_no test_info.id %}" class="text-green-600 hover:text-green-700"><i class="fa-solid fa-edit fa-2xl"></i></a></td>
              </tr>
              {% empty %}
              <tr>
                <td colspan="5" class="p-3 text-center">No mantoux test yet.</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
      
      <!-- ASO Titre Test Results -->
      <div>
        <div>
          <a href="{% url 'results:create_aso_titre' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700"><i class="fa-solid fa-plus fa-2xl"></i> SEND REQUEST</a>
        </div>
        <div class="overflow-x-auto max-h-[50vh] p-2">
          <table class="min-w-full divide-y divide-cyan-200 mb-4">
            <thead class="bg-cyan-50">
              <tr class="text-xs">
                <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">id</th>
                <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">result</th>
                <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">date</th>
                <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider"></th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-cyan-200">
              {% for test_info in aso_titre %}
              <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                <td class="p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.id }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.aso_titre_test.result }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.updated|default_if_none:'N/A' }}</td>
                <td class="p-3 whitespace-nowrap"><a href="{% url 'results:update_aso_titre' patient.file_no test_info.id %}" class="text-green-600 hover:text-green-700"><i class="fa-solid fa-edit fa-2xl"></i></a></td>
              </tr>
              {% empty %}
              <tr>
                <td colspan="5" class="p-3 text-center">No ASO Titre test yet.</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
      
      <!-- CRP Test Results -->
      <div>
        <div>
          <a href="{% url 'results:create_crp' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700"><i class="fa-solid fa-plus fa-2xl"></i> SEND REQUEST</a>
        </div>
        <div class="overflow-x-auto max-h-[50vh] p-2">
          <table class="min-w-full divide-y divide-cyan-200 mb-4">
            <thead class="bg-cyan-50">
              <tr class="text-xs">
                <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">id</th>
                <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">result</th>
                <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">date</th>
                <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider"></th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-cyan-200">
              {% for test_info in crp %}
              <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                <td class="p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.id }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.crp_test.result }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.updated|default_if_none:'N/A' }}</td>
                <td class="p-3 whitespace-nowrap"><a href="{% url 'results:update_crp' patient.file_no test_info.id %}" class="text-green-600 hover:text-green-700"><i class="fa-solid fa-edit fa-2xl"></i></a></td>
              </tr>
              {% empty %}
              <tr>
                <td colspan="5" class="p-3 text-center">No CRP test yet.</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
      
      <!-- HIV Screening Test Results -->
      <div>
        <div>
          <a href="{% url 'results:create_hiv_screening' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700"><i class="fa-solid fa-plus fa-2xl"></i> SEND REQUEST</a>
        </div>
        <div class="overflow-x-auto max-h-[50vh] p-2">
          <table class="min-w-full divide-y divide-cyan-200 mb-4">
            <thead class="bg-cyan-50">
              <tr class="text-xs">
                <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">id</th>
                <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">result</th>
                <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">date</th>
                <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider"></th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-cyan-200">
              {% for test_info in hiv_screening %}
              <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                <td class="p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.id }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.hiv_test.result }}</td>
                <td class="p-3 whitespace-nowrap">{{ test_info.updated|default_if_none:'N/A' }}</td>
                <td class="p-3 whitespace-nowrap"><a href="{% url 'results:update_hiv_screening' patient.file_no test_info.id %}" class="text-green-600 hover:text-green-700"><i class="fa-solid fa-edit fa-2xl"></i></a></td>
              </tr>
              {% empty %}
              <tr>
                <td colspan="5" class="p-3 text-center">No HIV Screening test yet.</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
                  
                  <!-- new test  -->
                  
            </div>    
            </div>
      
             </div>
      
             <!-- new lab  -->      
            
              <div>
                <div>
                  <a href="{% url 'results:general_test' patient.file_no %}" class="text-xs text-rose-600 hover:text-green-700"><i class="fa-solid fa-syringe fa-2xl"></i></a>
                  </div>
                  <div class="overflow-x-auto px-4 md:px-10 m-4">
                    <table class="min-w-full divide-y divide-cyan-200 mb-4">
                      <thead class="bg-cyan-50">
            
                        <tr class="text-center">
                          <th class="p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">S/N</th>
                          <th class="p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Test</th>
                          <th class="p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Date Collected</th>
                          <th class="p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Result</th>
                          <th class="p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Nature of Specimen</th>
                          <th class="p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Date Reported</th>
                          <th class="p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Edit</th>
                        </tr>
              
                      </thead>
                      <tbody class="bg-white divide-y divide-cyan-200">
                        {% for g in general_results %}
                        <tr class="bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300 text-xs">
                          <td class="p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                          <td class="p-3 whitespace-nowrap">
                            {%if g.test_1 is not None %}
                            {{ g.test_1|default_if_none:'' }} <br>
                            {%endif%}
                  
                            {%if g.test_2 is not None %}
                            {{ g.test_2|default_if_none:'' }} <br>
                            {%endif%}
                  
                            {%if g.test_3 is not None %}
                            {{ g.test_3|default_if_none:'' }} <br>
                            {%endif%}
                            {%if g.test_4 is not None %}
                            {{ g.test_4|default_if_none:'' }} <br>
                            {%endif%}
                            
                            {%if g.test_5 is not None %}
                            {{ g.test_5|default_if_none:'' }} <br>
                            {%endif%}
                  
                            {%if g.test_6 is not None %}
                            {{ g.test_6|default_if_none:'' }} <br>
                            {%endif%}
                  
                            {%if g.test_7 is not None %}
                            {{ g.test_7|default_if_none:'' }} <br>
                            {%endif%}
                  
                            {%if g.test_8 is not None %}
                            {{ g.test_8|default_if_none:'' }} <br>
                            {%endif%}
                  
                            {%if g.test_9 is not None %}
                            {{ g.test_9|default_if_none:'' }} <br>
                            {%endif%}
                  
                            {%if g.test_10 is not None %}
                            {{ g.test_10|default_if_none:'' }} <br>
                            {%endif%}
                            
                            {%if g.test_11 is not None %}
                            {{ g.test_11|default_if_none:'' }} <br>
                            {%endif%}
                  
                            {%if g.test_12 is not None %}
                            {{ g.test_12|default_if_none:'' }} <br>
                            {%endif%}
                  
                            {%if g.test_13 is not None %}
                            {{ g.test_13|default_if_none:'' }} <br>
                            {%endif%}
                  
                            {%if g.test_14 is not None %}
                            {{ g.test_14|default_if_none:'' }} <br>
                            {%endif%}
                  
                            {%if g.test_15 is not None %}
                            {{ g.test_15|default_if_none:'' }}
                            {%endif%}
            
                                                                                          
      
                          </td>
                          <td class="p-3 whitespace-nowrap">{{ g.collected|default_if_none:'N/A' }}</td>
                          <td class="p-3 whitespace-nowrap">
                            {%if g.result_1 is not None%}
                            {{ g.result_1|default_if_none:'' }} <br>
                            {%endif%}
                            
                            {%if g.result_2 is not None%}
                            {{ g.result_2|default_if_none:'' }} <br>
                            {%endif%}
            
                            {%if g.result_3 is not None%}
                            {{ g.result_3|default_if_none:'' }}   <br>
                            {%endif%}
            
                            {%if g.result_4 is not None%}
                            {{ g.result_4|default_if_none:'' }} <br>
                            {%endif%}
            
                            {%if g.result_5 is not None%}
                            {{ g.result_5|default_if_none:'' }} <br>
                            {%endif%}
            
                            {%if g.result_6 is not None%}
                            {{ g.result_6|default_if_none:'' }} <br>
                            {%endif%}
            
                            {%if g.result_7 is not None%}
                            {{ g.result_7|default_if_none:'' }} <br>
                            {%endif%}
            
                            {%if g.result_8 is not None%}
                            {{ g.result_8|default_if_none:'' }} <br>
                            {%endif%}
            
                            {%if g.result_9 is not None%}
                            {{ g.result_9|default_if_none:'' }} <br>
                            {%endif%}
            
                            {%if g.result_10 is not None%}
                            {{ g.result_10|default_if_none:'' }} <br>
                            {%endif%}
            
                            {%if g.result_11 is not None%}
                            {{ g.result_11|default_if_none:'' }} <br>
                            {%endif%}
            
                            {%if g.result_12 is not None%}
                            {{ g.result_12|default_if_none:'' }} <br>
                            {%endif%}
            
                            {%if g.result_13 is not None%}
                            {{ g.result_13|default_if_none:'' }} <br>
                            {%endif%}
            
                            {%if g.result_14 is not None%}
                            {{ g.result_14|default_if_none:'' }} <br>
                            {%endif%}
            
                            {%if g.result_15 is not None%}
                            {{ g.result_15|default_if_none:'' }} <br>
                            {%endif%}
            
                          </td>
                          <td class="p-3 whitespace-nowrap">{{ g.nature_of_specimen|default_if_none:'N/A' }}</td>
                          {%if g.cleared %}
                          <td class=" p-3 whitespace-nowrap">{{ g.updated|default_if_none:'N/A' }}</td>
                          {%else%}
                          <td class=" p-3 whitespace-nowrap"></td>
                          {%endif%}      
                      <td class="p-3 whitespace-nowrap">
                            <a href="{% url 'general_result' g.patient.file_no g.id %}" class="text-green-600 hover:text-green-700"><i class="fa-solid fa-edit fa-2xl"></i></a>
                          </td>
                        </tr>
                        {% endfor %}
                      </tbody>
                    </table>
                  </div>
              </div>
              
      
      

            <!-- to here is lab  -->
      </div>
      </div>


    </div>
    <!-- break -->
      <!-- break -->
      <div> 
        <div>    
        <!-- Dispensary Form Section -->
        <a href="{% url 'pharm:add_prescription' patient.file_no %}" class="text-xs text-green-600 hover:text-green-700"><i class="fa-solid fa-prescription fa-2xl"></i></a>

      </div>     
        <div class="overflow-x-auto max-h-[50vh] p-2">
          <table class="min-w-full divide-y divide-cyan-200 mb-4">
            <thead class="bg-cyan-50">
              <tr class="text-xs">
                <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Prescribed Drugs</th>
                <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Dose</th>
                <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Quantity</th>
                <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Date Prescribed</th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-cyan-200">
              {% for p in prescribed_drugs %}
              <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                <td class=" p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                <td class=" p-3 whitespace-nowrap">{{ p.drug|default_if_none:''}}</td>
                <td class=" p-3 whitespace-nowrap">{{ p.dose|default_if_none:''}}</td>
                <td class=" p-3 whitespace-nowrap">{{ p.quantity|default_if_none:''}}</td>
                <td class=" p-3 whitespace-nowrap">{{ p.updated}}</td>
              </tr>
              {%empty%}
              <div class="p-2 text-xs">
                  <p>No prescriptions yet</p>
              </div>
             {%endfor%}
          </tbody>
          </table>
        </div>
     </div>
    <!-- break -->
      <!-- break -->

      <div>
        <div>
            <a href="{% url 'radiology_test' patient.file_no %}" class="text-xs text-rose-600 hover:text-green-700"><i class="fa-solid fa-x-ray fa-2xl"></i></a>
          </div>
        <div class="overflow-x-auto max-h-[50vh] p-2">
            <table class="min-w-full divide-y divide-cyan-200 mb-4">
                <thead class="bg-cyan-50">
                    <tr class="text-xs">
                        <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                        <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Test</th>
                        <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Comment</th>
                        <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Date Reported</th>
                        <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">DICOM File</th>
                    </tr>
                </thead>
                <tbody class="bg-white divide-y divide-cyan-200">
                    {% for r in radiology_results %}
                    <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                        <td class="p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                        <td class="p-3 whitespace-nowrap">{{ r.test|default_if_none:'' }}</td>
                        <td class="p-3 whitespace-nowrap">{{ r.comments|default_if_none:'' }}</td>
                        <td class="p-3 whitespace-nowrap">{{ r.updated|default_if_none:'' }}</td>
                        <td class="p-3 whitespace-nowrap">
                        <a href="{{ result.dicom_file.url }}" download>Download DICOM File</a>
                      </td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="5" class="p-3">
                            <p>No radiology test and result yet</p>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    <!-- break -->
      <!-- break -->
      <div> 
        <div>
        <a href="#" class="text-xs text-green-600 hover:text-green-700"><i class="fa-solid fa-crutch fa-2xl"></i></a>
      </div>     
        <div class="overflow-x-auto max-h-[50vh] p-2">
          <table class="min-w-full divide-y divide-cyan-200 mb-4">
            <thead class="bg-cyan-50">
              <tr class="text-xs">
                <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-cyan-200">
              
              <tr class="text-xs uppercase bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                <td class=" p-3 whitespace-nowrap"></td>
              </tr>

            </tbody>
          </table>
        </div>
     </div>
    <!-- break -->
      <!-- break -->
      <div> 
        <div>
        <a href="{%url 'admit_patient' patient.file_no %}" class="text-xs text-green-600 hover:text-green-700"><i class="fa-solid fa-bed fa-2xl"></i></a>
      </div>     
        <div class="overflow-x-auto max-h-[50vh] p-2">
          <table class="min-w-full divide-y divide-cyan-200 mb-4 uppercase">
            <thead class="bg-cyan-50">
              <tr class="text-xs">
                <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">status</th>
                <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">ward</th>
                <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">bed number</th>
                <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">admission date</th>
                <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">discharge date</th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-cyan-200">
              {% for a in admission_info %}
              <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                  <td class="p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                  <td class="p-3 whitespace-nowrap">
                      {% if a.status == 'RECEIVED' %}
                          <span class="text-green-600">
                              on admission for 
                              <span class="text-blue-600 text-sm">
                                  ({{ a.days_on_admission }} 
                                  {% if a.days_on_admission == 1 %}day{% else %}days{% endif %})
                              </span>
                          </span>
                      {% elif a.status == 'DISCHARGE' %}
                          <span class="text-cyan-600">discharged</span>
                      {% else %}
                          <span class="text-rose-500">not accepted yet</span>
                      {% endif %}
                  </td>
                  <td class="p-3 whitespace-nowrap">{{ a.ward|default_if_none:'' }}</td>
                  <td class="p-3 whitespace-nowrap">
                      {% if a.bed_number %}
                          <span class="text-green-600">{{ a.bed_number }}</span>
                      {% else %}
                          <span class="text-rose-500">bed not assigned yet</span>
                      {% endif %}
                  </td>
                  <td class="p-3 whitespace-nowrap">{{ a.created }}</td>
                  <td class="p-3 whitespace-nowrap">
                      {% if a.status == 'DISCHARGE' %}{{ a.updated }}{% endif %}
                  </td>
              </tr>
              {% endfor %}            </tbody>
          </table>
        </div>
     </div>
    <!-- break -->
      <!-- break -->
      <div> 
      <div class="text-center rounded-xl p-2 md:p-10 bg-gray-50">
        <ul class="uk-subnav uk-subnav-pill uppercase flex justify-center gap-2 " uk-switcher="animation: uk-animation-slide-left-medium, uk-animation-slide-right-medium">
          <li ><a href="#" class="rounded-lg ">PRIVATE SURGERY BILL</a></li>
          <li ><a href="#" class="rounded-lg ">SURGERY BILL</a></li>
        </ul>
        
        <div class="uk-switcher uk-margin">
          <div> 
            <div >
            <a href="{% url 'private_surgery_bill' patient.file_no %}" class="text-xs text-rose-600 hover:text-green-700"><i class="fa-solid fa-money-check fa-2xl"></i></a>
            </div>
         
            <div class="overflow-x-auto max-h-[50vh] p-2">
              <table class="min-w-full divide-y divide-cyan-200 mb-4">
                <thead class="bg-cyan-50">
                  <tr class="text-xs">
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">price</th>
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">payment</th>
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">billed by</th>
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">date</th>
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">details</th>
                      </tr>
        
                </thead>
                <tbody class="bg-white divide-y divide-cyan-200">
                  {% for s in private_bill %}
                  <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                    <td class=" p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                    <td class=" p-3 whitespace-nowrap">&#x20A6;{{ s.total_amount }}</td>
                    <td class=" p-3 whitespace-nowrap">
                      {% if s.items.first.payment.status %}
                      <span class="text-green-500">Paid</span>
                  {% else %}
                      <span class="text-red-500">Unpaid</span>
                  {% endif %}
                    </td>
                    <td class=" p-3 whitespace-nowrap">{{ s.user }}</td>
                    <td class=" p-3 whitespace-nowrap">{{ s.created }}</td>
                    <td class=" p-3 whitespace-nowrap"> <a href="{% url 'private_bill_detail' s.id %}" class="text-blue-500 hover:underline">View Details</a></td>
                      </tr>
                  {%empty%}
                  <div class="p-2">
                      <p>No surgery bill yet</p>
                  </div>
                 {%endfor%}
                </tbody>
              </table>
            </div>
         </div>

         <div> 
            <div >
            <a href="{% url 'surgery_bill' patient.file_no %}" class="text-xs text-rose-600 hover:text-green-700"><i class="fa-solid fa-money-check fa-2xl"></i></a>
            </div>
         
            <div class="overflow-x-auto max-h-[50vh] p-2">
              <table class="min-w-full divide-y divide-cyan-200 mb-4">
                <thead class="bg-cyan-50">
                  <tr class="text-xs">
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">price</th>
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">payment</th>
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">billed by</th>
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">date</th>
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">details</th>
                      </tr>
        
                </thead>
                <tbody class="bg-white divide-y divide-cyan-200">
                  {% for s in bills %}
                  <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                    <td class=" p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                    <td class=" p-3 whitespace-nowrap">&#x20A6;{{ s.total_amount }}</td>
                    <td class=" p-3 whitespace-nowrap">
                      {% if s.items.first.payment.status %}
                      <span class="text-green-500">Paid</span>
                  {% else %}
                      <span class="text-red-500">Unpaid</span>
                  {% endif %}
                    </td>
                    <td class=" p-3 whitespace-nowrap">{{ s.user }}</td>
                    <td class=" p-3 whitespace-nowrap">{{ s.created }}</td>
                    <td class=" p-3 whitespace-nowrap"> <a href="{% url 'bill_detail' s.id %}" class="text-blue-500 hover:underline">View Details</a></td>
                      </tr>
                  {%empty%}
                  <div class="p-2">
                      <p>No surgery bill yet</p>
                  </div>
                 {%endfor%}
                </tbody>
              </table>
            </div>
         </div>

        
  </div>

  </div>
     </div>

     <!-- break -->
      <!-- break -->
      <div> 
      <div class="text-center rounded-xl p-2 md:p-10 bg-gray-50">
        <ul class="uk-subnav uk-subnav-pill uppercase flex justify-center gap-2 " uk-switcher="animation: uk-animation-slide-left-medium, uk-animation-slide-right-medium">
          <li ><a href="#" class="rounded-lg ">IN-PATIENT VITAL SIGNS</a></li>
          <li class=><a href="#" class="rounded-lg ">IN-PATIENT MEDICATION</a></li>
          <li><a href="#" class="rounded-lg ">IN-PATIENT NOTES</a></li>
        </ul>
        
        <div class="uk-switcher uk-margin">


         <div> 
            <div >
            <a href="{% url 'ward_vital_signs' patient.file_no %}" class="text-xs text-rose-600 hover:text-green-700"><i class="fa-solid fa-heartbeat fa-2xl"></i></a>
            </div>
         
            <div class="overflow-x-auto max-h-[50vh] p-2">
              <table class="min-w-full divide-y divide-cyan-200 mb-4">
                <thead class="bg-cyan-50">
                  <tr class="text-xs">
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">body temperature</th>
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">pulse rate</th>
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">respiration rate</th>
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">blood pressure</th>
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">blood oxygen</th>
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">blood glucose</th>
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">weight</th>
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">by</th>
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">date</th>
                      </tr>
        
                </thead>
                <tbody class="bg-white divide-y divide-cyan-200">
                  {% for w in ward_vital_signs %}
                  <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300 normal-case">
                    <td class=" p-3 whitespace-nowrap uppercase">{{ w.user }}</td>
                    <td class=" p-3 whitespace-nowrap">{%if w.body_temperature %}{{ w.body_temperature|default:'' }}K{%else%}{%endif%}</td>
                    <td class=" p-3 whitespace-nowrap">{%if w.pulse_rate %}{{ w.pulse_rate }}BPM{%else%}{%endif%}</td>
                    <td class=" p-3 whitespace-nowrap">{%if w.respiration_rate %}{{ w.respiration_rate }}BPM{%else%}{%endif%}</td>
                    <td class=" p-3 whitespace-nowrap">{%if w.blood_pressure %}{{ w.blood_pressure }}mmHg{%else%}{%endif%}</td>
                    <td class=" p-3 whitespace-nowrap">{%if w.blood_oxygen %}{{ w.blood_oxygen }}%{%else%}{%endif%}</td>
                    <td class=" p-3 whitespace-nowrap">{%if w.blood_glucose %}{{ w.blood_glucose }}mmol/L{%else%}{%endif%}</td>
                    <td class=" p-3 whitespace-nowrap">{%if w.weight %}{{ w.weight }}kg{%else%}{%endif%}</td>
                    <td class=" p-3 whitespace-nowrap">{%if w.height %}{{ w.height }}m{%else%}{%endif%}</td>
                    <td class=" p-3 whitespace-nowrap">{{ w.updated }}</td>
                      </tr>
                  {%empty%}
                  <div class="p-2">
                      <p>No ward vitals sign yet</p>
                  </div>
                 {%endfor%}
                </tbody>
              </table>
            </div>
         </div>
        
          <div>
            <div>
              <a href="{% url 'ward_medication' patient.file_no %}" class="text-xs text-cyan-600 hover:text-green-700"><i class="fa-solid fa-file-prescription fa-2xl"></i></a>
            </div>
            <div class="overflow-x-auto max-h-[50vh] p-2">
              <table class="min-w-full divide-y divide-cyan-200 mb-4">
                <thead class="bg-cyan-50">
                  <tr class="text-xs">
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Drug</th>
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Dose</th>
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Comment</th>
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">By</th>
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Date</th>
                  </tr>
                </thead>
                <tbody class="bg-white divide-y divide-cyan-200">
                  {% for w in ward_medication%}
                  <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                    <td class=" p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                    <td class=" p-3 whitespace-nowrap">{{ w.drug|default_if_none:''}}</td>
                    <td class=" p-3 whitespace-nowrap">{{ w.dose|default_if_none:'' }}</td>
                    <td class=" p-3 whitespace-nowrap">{{ w.comments|default_if_none:'' }}</td>
                    <td class=" p-3 whitespace-nowrap">{{ w.user|default_if_none:'' }}</td>
                    <td class=" p-3 whitespace-nowrap">{{ w.updated|default_if_none:'' }}</td>
               
                  </tr>
                  {%empty%}
                  <div class="p-2">
                      <p>No ward medications yet</p>
                  </div>
                 {%endfor%}
                </tbody>
              </table>
            </div>
          </div>
        
        
          <div>
            <div>
              <a href="{% url 'ward_notes' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700"><i class="fa-solid fa-clipboard-list fa-2xl"></i></a>
            </div>
            <div class="overflow-x-auto max-h-[50vh] p-2">
              <table class="min-w-full divide-y divide-cyan-200 mb-4">
                <thead class="bg-cyan-50">
        
                  <tr class="text-xs">
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Note</th>
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">By</th>
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Date</th>
                  </tr>
        
                </thead>
                <tbody class="bg-white divide-y divide-cyan-200">
                  {% for w in ward_clinical_notes %}
                  <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                    <td class=" p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                    <td class=" p-3 whitespace-nowrap">
                      <details>
                        <summary class="bg-blue-600 p-2 text-white rounded-lg text-center">OPEN NOTE</summary>
                        <div class="bg-white text-blue-600 h-fit text-xs well-sm overflow-x-auto max-h-[50vh] rounded-md m-4">
                          <p class="text-xs text-center">{{ w.note.html|safe }}</p>
                        </div>
                      </details>    
                    </td>
                    <td class=" p-3 whitespace-nowrap">{{ w.user|default_if_none:'' }}</td>
                    <td class=" p-3 whitespace-nowrap">{{ w.updated|default_if_none:'' }}</td>
                  </tr>
                  {%empty%}
                  <div class="p-2">
                      <p>No ward clinical notes yet</p>
                  </div>
                 {%endfor%}
                </tbody>
              </table>
            </div>
          </div>  
        
  </div>

  </div>
     </div>

    <!-- break -->
    <!-- break -->
      <!-- break -->
      <div> 
        <div class="text-center rounded-xl p-2 m-4  md:p-10 bg-gray-50">
          <ul class="uk-subnav uk-subnav-pill uppercase flex justify-center gap-2 " uk-switcher="animation: uk-animation-slide-left-medium, uk-animation-slide-right-medium">
            <li ><a href="#" class="rounded-lg ">THEATRE BOOKINGS</a></li>
            <li><a href="#" class="rounded-lg ">OPERATION NOTES</a></li>
            <li><a href="#" class="rounded-lg ">THEATRE OPERATION RECORD</a></li>
            <li><a href="#" class="rounded-lg ">ANAESTHSIA CHECKLIST</a></li>
          </ul>
          
          <div class="uk-switcher uk-margin">
     
            <div>
              <div>
                <a href="{% url 'book_for_surgery' patient.file_no %}" class="text-xs text-cyan-600 hover:text-green-700"><i class="fa-solid fa-calendar-days fa-2xl"></i></a>
              </div>
              <div class="overflow-x-auto max-h-[50vh] p-2">
                <table class="min-w-full divide-y divide-cyan-200 mb-4">
                  <thead class="bg-cyan-50">
                    <tr class="text-xs">
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Theatre</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Team</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">DIAGNOSIS</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">OPERATION PLANNED</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">operation date</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Booked By</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Date Booked</th>
                    </tr>
                  </thead>
                  <tbody class="bg-white divide-y divide-cyan-200">
                    {% for t in theatre_bookings %}
                    <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                      <td class=" p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ t.theatre|default_if_none:''}}</td>
                      <td class=" p-3 whitespace-nowrap">{{ t.team|default_if_none:'' }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ t.diagnosis|default_if_none:'' }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ t.operation_planned|default_if_none:'' }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ t.date|default_if_none:'' }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ t.doctor|default_if_none:'' }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ t.updated|default_if_none:'' }}</td>
                 
                    </tr>
                    {%empty%}
                    <div class="p-2">
                        <p>No theatre bookings yet</p>
                    </div>
                   {%endfor%}
                  </tbody>
                </table>
              </div>
            </div>
          
          
            <div>
              <div>
                <a href="{% url 'operation_notes' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700"><i class="fa-solid fa-clipboard-list fa-2xl"></i></a>
              </div>
              <div class="overflow-x-auto max-h-[50vh] p-2">
                <table class="min-w-full divide-y divide-cyan-200 mb-4">
                  <thead class="bg-cyan-50">
          
                    <tr class="text-xs">
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">anaesthesia used</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">findings</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">post op-order</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">prescription</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Note</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">By</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Date</th>
                    </tr>
          
                  </thead>
                  <tbody class="bg-white divide-y divide-cyan-200">
                    {% for o in operation_notes %}
                    <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                      <td class=" p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ o.type_of_anaesthesia }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ o.findings }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ o.post_op_order }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ o.prescription }}</td>
                      <td class=" p-3 whitespace-nowrap">
                        <details>
                          <summary class="bg-blue-600 p-2 text-white rounded-lg text-center">OPEN NOTE</summary>
                          <div class="bg-white text-blue-600 h-fit text-xs well-sm overflow-x-auto max-h-[50vh] rounded-md m-4">
                            <p class="text-xs text-center">{{ o.notes }}</p>
                          </div>
                        </details>    
                      </td>
                      <td class=" p-3 whitespace-nowrap">{{ o.user|default_if_none:'' }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ o.updated|default_if_none:'' }}</td>
                    </tr>
                    {%empty%}
                    <div class="p-2">
                        <p>No theatre notes yet</p>
                    </div>
                   {%endfor%}
                  </tbody>
                </table>
              </div>
            </div>  
          
          
            <div>
              <div>
                <a href="{% url 'theatre_operation_record' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700"><i class="fa-solid fa-clipboard-list fa-2xl"></i></a>
              </div>
              <div class="overflow-x-auto max-h-[50vh] p-2">
                <table class="min-w-full divide-y divide-cyan-200 mb-4">
                  <thead class="bg-cyan-50">
          
                    <tr class="text-xs">
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">theatre</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">ward</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">diagnosis</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">operation</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">surgeon</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">assistant</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">instrument nurse</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">circulating nurse</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">anaesthetist</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">comments</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Date of operation</th>
                    </tr>
          
                  </thead>
                  <tbody class="bg-white divide-y divide-cyan-200">
                    {% for t in theatre_operation_record %}
                    <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                      <td class=" p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ t.theatre }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ t.ward }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ t.diagnosis }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ t.operation }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ t.surgeon }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ t.assistant_1 }} <br> {{t.assistant_2}}<br> {{t.assistant_3}}</td>
                      <td class=" p-3 whitespace-nowrap">{{ t.instrument_nurse|default_if_none:'' }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ t.circulating_nurse|default_if_none:'' }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ t.anaesthetist|default_if_none:'' }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ t.comments|default_if_none:'' }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ t.date_of_operation|default_if_none:'' }}</td>
                    </tr>
                    {%empty%}
                    <div class="p-2">
                        <p>No theatre operation records yet</p>
                    </div>
                   {%endfor%}
                  </tbody>
                </table>
              </div>
            </div>  
          
          
          
          
            <div>
              <div>
                <a href="{% url 'anaesthesia_checklist' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700"><i class="fa-solid fa-clipboard-list fa-2xl"></i></a>
              </div>
              <div class="overflow-x-auto max-h-[50vh] p-2">
                <table class="min-w-full divide-y divide-cyan-200 mb-4">
                  <thead class="bg-cyan-50">
          
                    <tr class="text-xs">
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">concurrent medical illness</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">past medical history</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">past surgical history</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">trasnfussion</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">drug history</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">social history</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">denctures</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">permanent</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">temporary</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">loose teeth</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">last meal</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">comment</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Date</th>
                    </tr>
          
                  </thead>
                  <tbody class="bg-white divide-y divide-cyan-200">
                    {% for a in anaesthesia_checklist %}
                    <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                      <td class=" p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ a.current_medical_illness }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ a.past_medical_history }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ a.past_surgical_history }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ a.transfussion }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ a.drug_history }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ a.social_history }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ a.denctures }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ a.permanent }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ a.temporary }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ a.lose_teeth }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ a.last_meal }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ a.comment }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ a.updated|default_if_none:'' }}</td>
                    </tr>
                    {%empty%}
                    <div class="p-2">
                        <p>No anaesthesia checklist record yet</p>
                    </div>
                   {%endfor%}
                  </tbody>
                </table>
              </div>
            </div>  
          
          
    </div>
  
    </div>
     </div>

         <!-- break -->
      <!-- break -->
      <div class="flex flex-col items-center">
        <div class="mb-4">
          <a href="{% url 'new_archive' patient.file_no %}" class="text-xs text-green-600 hover:text-green-700">
            <i class="fas fa-file-upload fa-2xl"></i> Upload File
          </a>
        </div>
        <div class="overflow-x-auto max-h-[50vh] p-2 w-full">
          <table class="min-w-full divide-y divide-cyan-200 mb-4 uppercase">
            <thead class="bg-cyan-50">
              <tr class="text-xs">
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider text-center">#</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider text-center">File</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider text-center">Title</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider text-center">Date</th>
                <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider text-center">Actions</th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-cyan-200">
              {% for a in archive %}
              <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                <td class="p-3 whitespace-nowrap text-center">{{ forloop.counter }}</td>
                <td class="p-3 whitespace-nowrap text-center">
                  {% if a.file.name|lower|slice:"-3:" == 'pdf' %}
                    <a href="{{ a.file.url }}" target="_blank" class="text-blue-500 hover:text-blue-700">View PDF</a>
                  {% else %}
                    <img src="{{ a.file.url }}" alt="{{ a.title }}" style="max-width: 100px; max-height: 100px; cursor: pointer; margin: auto;" onclick="openModal('{{ a.file.url }}', '{{ a.title }}')" class="archive-image">
                  {% endif %}
                </td>
                <td class="p-3 whitespace-nowrap text-center">{{ a.title }}</td>
                <td class="p-3 whitespace-nowrap text-center">{{ a.updated}}</td>
                <td class="p-3 whitespace-nowrap text-center">
                  <a href="{% url 'results:update_archive' a.id %}" class="text-blue-500 hover:text-blue-700 fa-lg mr-2">
                    <i class="fas fa-edit"></i>
                  </a>
                  <a href="{% url 'delete_archive' a.id %}" class="text-red-500 hover:text-red-700 fa-lg" onclick="return confirm('Are you sure you want to delete this file?');">
                    <i class="fas fa-trash"></i>
                  </a>
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>      
      <!-- Modal for full-size image -->
      <div id="imageModal" class="modal" onclick="closeModal()">
        <span class="close" onclick="closeModal()">&times;</span>
        <img class="modal-content" id="modalImage">
        <div id="modalCaption"></div>
      </div>
    <!-- break -->
      <!-- break -->
    <!-- break -->
<!-- end  -->
  </div>
</div>
<style>
  .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      padding-top: 100px;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0,0,0,0.9);
  }

  .modal-content {
      margin: auto;
      display: block;
      width: 80%;
      max-width: 700px;
  }

  #modalCaption {
      margin: auto;
      display: block;
      width: 80%;
      max-width: 700px;
      text-align: center;
      color: #ccc;
      padding: 10px 0;
      height: 150px;
  }

  .close {
      position: absolute;
      top: 15px;
      right: 35px;
      color: #f1f1f1;
      font-size: 40px;
      font-weight: bold;
      transition: 0.3s;
  }

  .close:hover,
  .close:focus {
      color: #bbb;
      text-decoration: none;
      cursor: pointer;
  }
</style>
<script>
  function openModal(imageUrl, imageTitle) {
      var modal = document.getElementById("imageModal");
      var modalImg = document.getElementById("modalImage");
      var captionText = document.getElementById("modalCaption");
      
      modal.style.display = "block";
      modalImg.src = imageUrl;
      captionText.innerHTML = imageTitle;
  }

  function closeModal() {
      var modal = document.getElementById("imageModal");
      modal.style.display = "none";
  }

  // Close the modal when clicking outside the image
  window.onclick = function(event) {
      var modal = document.getElementById("imageModal");
      if (event.target == modal) {
          modal.style.display = "none";
      }
  }
</script>

{% endblock %}
