{% extends 'base.html' %}
{% load static %}

{% block title %}{{ room.name }} - {{ room.clinic.name }}{% endblock %}

{% block page_title %}
<div class="flex justify-center">
    <a href="{% url 'clinic_details' room.clinic.id %}"><i class="fa-solid fa-backward fa-2xl mr-4"></i></a>
    {{ room.name }} - {{ room.clinic.name }}
</div>
{% endblock %}

{% block content %}
<div class="mx-2 md:mx-20 rounded-xl p-4 shadow-black shadow-sm bg-emerald-50">
    <h2 class="text-2xl font-bold mb-4">Patients in {{ room.room }}</h2>
    <div class="overflow-x-auto uppercase">
        <table class="min-w-full divide-y divide-emerald-500">
            <thead class="bg-emerald-100">
                <tr class="text-xs">
                    <th class="p-3 text-left text-xs font-medium text-emerald-500 uppercase tracking-wider">#</th>
                    <th class="p-3 text-left text-xs font-medium text-emerald-500 uppercase tracking-wider">File Number</th>
                    <th class="p-3 text-left text-xs font-medium text-emerald-500 uppercase tracking-wider">Patient Name</th>
                    <th class="p-3 text-left text-xs font-medium text-emerald-500 uppercase tracking-wider">Status</th>
                    <th class="p-3 text-left text-xs font-medium text-emerald-500 uppercase tracking-wider">Action</th>
                </tr>
            </thead>
            <tbody class="bg-white divide-y divide-emerald-200">
                {% for handover in patients %}
                <tr class="bg-emerald-50 hover:bg-emerald-200 transition-colors duration-300 text-xs">
                    <td class="p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                    <td class="p-3 whitespace-nowrap">{{ handover.patient.file_no }}</td>
                    <td class="p-3 whitespace-nowrap">{{ handover.patient.full_name }}</td>
                    <td class="p-3 whitespace-nowrap">{{ handover.get_status_display }}</td>
                    <td class="p-3 whitespace-nowrap">
                        <a href="{{ handover.patient.get_absolute_url }}" class="text-blue-500 hover:text-blue-700">
                            <i class="fa-solid fa-folder-open fa-lg"></i>
                        </a>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="5" class="p-3 text-center">No patients currently in this room.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}